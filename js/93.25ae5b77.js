"use strict";(self["webpackChunkvue3_pwa"]=self["webpackChunkvue3_pwa"]||[]).push([[93],{93:function(t,e,s){s.r(e),s.d(e,{default:function(){return Ft}});var a=s(3396),i=s(9242),o=s(7139);const l={class:"container-page row"},n={class:"table-menu"},d=(0,a._)("h3",{class:"tableName"},"營養評估診斷",-1),r={class:"btnList"},c={class:"input-group searchList"},m=(0,a._)("i",{class:"bi bi-search"},null,-1),p=[m],u={class:"addModal"},h=(0,a._)("i",{class:"bi bi-pencil-square"},null,-1),_=(0,a._)("span",null," 建立",-1),f=[h,_],b={class:"table-responsive"},g={class:"table table-striped table-bordered"},D=(0,a._)("thead",{class:"thead-dark"},[(0,a._)("tr",null,[(0,a._)("th",{scope:"col"},"病患ID"),(0,a._)("th",{scope:"col"},"姓名"),(0,a._)("th",{scope:"col"},"初始建立時間"),(0,a._)("th",{scope:"col"},"最近更新時間"),(0,a._)("th",{scope:"col"},"編輯")])],-1),v={class:"btn-group"},y=["onClick"],M=(0,a._)("i",{class:"bi bi-pencil-fill"},null,-1),x=[M],w=["onClick"],$=(0,a._)("i",{class:"bi bi-trash3-fill"},null,-1),E=[$];function S(t,e,s,m,h,_){const M=(0,a.up)("loading"),$=(0,a.up)("PesModal"),S=(0,a.up)("PesEditModal"),P=(0,a.up)("PesDelModal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",l,[(0,a._)("div",n,[d,(0,a._)("div",r,[(0,a._)("div",c,[(0,a.wy)((0,a._)("input",{type:"text",id:"search",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>h.searchKeyWords=t),placeholder:"請輸入姓名"},null,512),[[i.nr,h.searchKeyWords]]),(0,a._)("button",{class:"btn btn-outline-success searchBtn",onClick:e[1]||(e[1]=(...t)=>_.getSearch&&_.getSearch(...t))},p)]),(0,a._)("div",u,[(0,a._)("button",{class:"btn btn-secondary",onClick:e[2]||(e[2]=t=>_.openModal(""))},f)])])]),(0,a._)("div",b,[(0,a._)("table",g,[D,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(h.PES_arr,(t=>((0,a.wg)(),(0,a.iD)("tbody",{key:t.diagnosis_no},[(0,a._)("tr",null,[(0,a._)("td",null,(0,o.zw)(t.patient_id),1),(0,a._)("td",null,(0,o.zw)(t.name),1),(0,a._)("td",null,(0,o.zw)(_.formatDate(t.create_time)),1),(0,a._)("td",null,(0,o.zw)(_.formatDate(t.update_time)),1),(0,a._)("td",null,[(0,a._)("div",v,[(0,a._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:e=>_.openModal("editModal",t)},x,8,y),(0,a._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:e=>_.openModal("delModal",t)},E,8,w)])])])])))),128))])]),(0,a.Wm)(M,{active:t.isLoading},null,8,["active"])]),(0,a.Wm)($,{"info-detail":h.PES_InfoDetails,onAddPes:e[3]||(e[3]=t=>_.closeModal(""))},null,8,["info-detail"]),(0,a.Wm)(S,{"info-detail":h.PES_InfoDetails,onEditPes:e[4]||(e[4]=t=>_.closeModal("editModal"))},null,8,["info-detail"]),(0,a.Wm)(P,{"info-detail":h.PES_InfoDetails,onDeletePes:e[5]||(e[5]=t=>_.closeModal("delModal"))},null,8,["info-detail"])],64)}var P=s(2166),k=s(5513),L=s.n(k),V=s(65);const W={id:"pesModal",ref:"pesModal",class:"modal fade",tabindex:"-1","aria-labelledby":"pesModalLabel","aria-hidden":"true"},I={class:"modal-dialog modal-xl"},U=(0,a._)("div",{class:"modal-header bg-dark text-white"},[(0,a._)("h5",{id:"pesModalLabel",class:"modal-title"},[(0,a._)("span",null,"建立紀錄")]),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),C={class:"modal-body"},A={class:"row"},q={class:"col-sm"},J={class:"row mb-3"},z={class:"form-group col-md-6"},N=(0,a._)("label",{for:"patient_id"},"病患編號：",-1),O={class:"form-group col-md-6"},Z=(0,a._)("label",{for:"patient_name"},"姓名：",-1),K={class:"form-textarea mb-4"},B=(0,a._)("div",{class:"form-label"},[(0,a._)("label",{for:"problem"},"Problem：")],-1),H={class:"form-textarea mb-4"},F=(0,a._)("div",{class:"form-label"},[(0,a._)("label",{for:"etiology"},"Etiology：")],-1),T={class:"form-textarea mb-4"},j=(0,a._)("div",{class:"form-label"},[(0,a._)("label",{for:"symptoms"},"Symptoms：")],-1),Y={class:"modal-footer"},Q=(0,a._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消",-1);function R(t,e,s,l,n,d){const r=(0,a.up)("v-field"),c=(0,a.up)("error-message"),m=(0,a.up)("v-form");return(0,a.wg)(),(0,a.iD)("div",W,[(0,a._)("div",I,[(0,a.Wm)(m,{class:"modal-content border-0"},{default:(0,a.w5)((({errors:t})=>[U,(0,a._)("div",C,[(0,a._)("div",A,[(0,a._)("div",q,[(0,a._)("div",J,[(0,a._)("div",z,[N,(0,a.Wm)(r,{id:"patient_id",name:"病患編號",type:"number",modelValue:s.infoDetail.patient_id,"onUpdate:modelValue":e[0]||(e[0]=t=>s.infoDetail.patient_id=t),rules:{required:!0,min:1,max:7,min_value:1},class:(0,o.C_)({"is-invalid":t["病患編號"]})},null,8,["modelValue","class"]),(0,a.Wm)(c,{name:"病患編號",class:"invalid-feedback"})]),(0,a._)("div",O,[Z,(0,a.Wm)(r,{id:"patient_name",name:"姓名",type:"text",modelValue:s.infoDetail.name,"onUpdate:modelValue":e[1]||(e[1]=t=>s.infoDetail.name=t),rules:{required:!0,max:10},class:(0,o.C_)({"is-invalid":t["姓名"]})},null,8,["modelValue","class"]),(0,a.Wm)(c,{name:"姓名",class:"invalid-feedback"})])]),(0,a._)("div",K,[B,(0,a.wy)((0,a._)("textarea",{id:"problem",type:"text",name:"textarea",class:"form-control",rows:"10",cols:"30","onUpdate:modelValue":e[2]||(e[2]=t=>s.infoDetail.problem=t),required:""},null,512),[[i.nr,s.infoDetail.problem]])]),(0,a._)("div",H,[F,(0,a.wy)((0,a._)("textarea",{id:"etiology",type:"text",name:"textarea",class:"form-control",rows:"10",cols:"30","onUpdate:modelValue":e[3]||(e[3]=t=>s.infoDetail.etiology=t),required:""},null,512),[[i.nr,s.infoDetail.etiology]])]),(0,a._)("div",T,[j,(0,a.wy)((0,a._)("textarea",{id:"etiology",type:"text",name:"textarea",class:"form-control",rows:"10",cols:"30","onUpdate:modelValue":e[4]||(e[4]=t=>s.infoDetail.symptoms=t),required:""},null,512),[[i.nr,s.infoDetail.symptoms]])])])])]),(0,a._)("div",Y,[Q,(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=(...t)=>d.confirmPost&&d.confirmPost(...t))},"確認")])])),_:1})])],512)}var G=s(5708),X=s(3990),tt=s(579),et=s(2389),st=s(8456);Object.keys(X.ZP).forEach((t=>{(0,G.aH)(t,X.ZP[t])})),(0,G.jQ)({generateMessage:(0,tt.NC)({zh_TW:et}),validateOnInput:!0}),(0,tt.i_)("zh_TW");var at={data(){return{fixApi:"https://140.123.173.4"}},methods:{confirmPost(){this.$store.dispatch("startLoading");const t=`${this.fixApi}/nutritionist/nutritionalAssessmentDiagnosis/${this.nutritionist_id}`;""===this.infoDetail.patient_id||void 0===this.infoDetail.patient_id||""===this.infoDetail.name||void 0===this.infoDetail.name||""===this.infoDetail.problem||void 0===this.infoDetail.problem||""===this.infoDetail.etiology||void 0===this.infoDetail.etiology||""===this.infoDetail.symptoms||void 0===this.infoDetail.symptoms?((0,st.Jt)("尚有輸入欄位未填寫"),this.$store.dispatch("stopLoading")):this.infoDetail.patient_id<1?((0,st.Jt)("病患編號不能小於1"),this.$store.dispatch("stopLoading")):this.$http.post(t,this.infoDetail).then((t=>{this.$emit("addPes"),console.log(t.data),this.$store.dispatch("stopLoading"),(0,st.qp)(t.data.msg)})).catch((t=>{console.log(t),(0,st.Jt)(t.response.data.msg)}))}},computed:{...(0,V.Se)(["getUserID"]),nutritionist_id(){return this.getUserID}},props:{infoDetail:{default:{}}},emits:["addPes"],components:{VField:G.gN,VForm:G.l0,ErrorMessage:G.Bc}},it=s(89);const ot=(0,it.Z)(at,[["render",R]]);var lt=ot;const nt={id:"pesEditModal",ref:"pesEditModal",class:"modal fade",tabindex:"-1","aria-labelledby":"pesEditModalLabel","aria-hidden":"true"},dt={class:"modal-dialog modal-xl"},rt=(0,a._)("div",{class:"modal-header bg-dark text-white"},[(0,a._)("h5",{id:"pesEditModalLabel",class:"modal-title"},[(0,a._)("span",null,"編輯紀錄")]),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ct={class:"modal-body"},mt={class:"row"},pt={class:"col-sm"},ut={class:"row mb-3"},ht={class:"form-group col-md-4"},_t=(0,a._)("label",{for:"diagnosis_no"},"病歷號碼：",-1),ft={class:"form-group col-md-4"},bt=(0,a._)("label",{for:"patient_id"},"病患編號：",-1),gt={class:"form-group col-md-4"},Dt=(0,a._)("label",{for:"patient_name"},"姓名：",-1),vt={class:"form-textarea mb-4"},yt=(0,a._)("div",{class:"form-label"},[(0,a._)("label",{for:"problem"},"Problem：")],-1),Mt={class:"form-textarea mb-4"},xt=(0,a._)("div",{class:"form-label"},[(0,a._)("label",{for:"etiology"},"Etiology：")],-1),wt={class:"form-textarea mb-4"},$t=(0,a._)("div",{class:"form-label"},[(0,a._)("label",{for:"symptoms"},"Symptoms：")],-1),Et={class:"modal-footer"},St=(0,a._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消",-1);function Pt(t,e,s,l,n,d){const r=(0,a.up)("v-field"),c=(0,a.up)("error-message"),m=(0,a.up)("v-form");return(0,a.wg)(),(0,a.iD)("div",nt,[(0,a._)("div",dt,[(0,a.Wm)(m,{class:"modal-content border-0"},{default:(0,a.w5)((({errors:t})=>[rt,(0,a._)("div",ct,[(0,a._)("div",mt,[(0,a._)("div",pt,[(0,a._)("div",ut,[(0,a._)("div",ht,[_t,(0,a.Wm)(r,{id:"diagnosis_no",name:"病歷號碼",type:"number",modelValue:s.infoDetail.diagnosis_no,"onUpdate:modelValue":e[0]||(e[0]=t=>s.infoDetail.diagnosis_no=t),rules:{required:!0,min:1,min_value:1},class:(0,o.C_)({"is-invalid":t["病歷號碼"]}),disabled:""},null,8,["modelValue","class"]),(0,a.Wm)(c,{name:"病歷號碼",class:"invalid-feedback"})]),(0,a._)("div",ft,[bt,(0,a.Wm)(r,{id:"patient_id",name:"病患編號",type:"number",modelValue:s.infoDetail.patient_id,"onUpdate:modelValue":e[1]||(e[1]=t=>s.infoDetail.patient_id=t),rules:{required:!0,min:1,max:7,min_value:1},class:(0,o.C_)({"is-invalid":t["病患編號"]}),disabled:""},null,8,["modelValue","class"]),(0,a.Wm)(c,{name:"病患編號",class:"invalid-feedback"})]),(0,a._)("div",gt,[Dt,(0,a.Wm)(r,{id:"patient_name",name:"姓名",type:"text",modelValue:s.infoDetail.name,"onUpdate:modelValue":e[2]||(e[2]=t=>s.infoDetail.name=t),rules:{required:!0,max:10},class:(0,o.C_)({"is-invalid":t["姓名"]}),disabled:""},null,8,["modelValue","class"]),(0,a.Wm)(c,{name:"姓名",class:"invalid-feedback"})])]),(0,a._)("div",vt,[yt,(0,a.wy)((0,a._)("textarea",{id:"problem",type:"text",name:"textarea",class:"form-control",rows:"10",cols:"30","onUpdate:modelValue":e[3]||(e[3]=t=>s.infoDetail.problem=t),required:""},null,512),[[i.nr,s.infoDetail.problem]])]),(0,a._)("div",Mt,[xt,(0,a.wy)((0,a._)("textarea",{id:"etiology",type:"text",name:"textarea",class:"form-control",rows:"10",cols:"30","onUpdate:modelValue":e[4]||(e[4]=t=>s.infoDetail.etiology=t),required:""},null,512),[[i.nr,s.infoDetail.etiology]])]),(0,a._)("div",wt,[$t,(0,a.wy)((0,a._)("textarea",{id:"etiology",type:"text",name:"textarea",class:"form-control",rows:"10",cols:"30","onUpdate:modelValue":e[5]||(e[5]=t=>s.infoDetail.symptoms=t),required:""},null,512),[[i.nr,s.infoDetail.symptoms]])])])])]),(0,a._)("div",Et,[St,(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:e[6]||(e[6]=(...t)=>d.confirmEdit&&d.confirmEdit(...t))},"確認")])])),_:1})])],512)}Object.keys(X.ZP).forEach((t=>{(0,G.aH)(t,X.ZP[t])})),(0,G.jQ)({generateMessage:(0,tt.NC)({zh_TW:et}),validateOnInput:!0}),(0,tt.i_)("zh_TW");var kt={data(){return{fixApi:"https://140.123.173.4"}},methods:{confirmEdit(){this.$store.dispatch("startLoading");const t=`${this.fixApi}/nutritionist/nutritionalAssessmentDiagnosis/${this.nutritionist_id}/${this.infoDetail.diagnosis_no}`;""===this.infoDetail.patient_id||void 0===this.infoDetail.patient_id||""===this.infoDetail.name||void 0===this.infoDetail.name||""===this.infoDetail.problem||void 0===this.infoDetail.problem||""===this.infoDetail.etiology||void 0===this.infoDetail.etiology||""===this.infoDetail.symptoms||void 0===this.infoDetail.symptoms?((0,st.Jt)("尚有輸入欄位未填寫"),this.$store.dispatch("stopLoading")):this.infoDetail.patient_id<1?((0,st.Jt)("病患編號不能小於1"),this.$store.dispatch("stopLoading")):this.$http.put(t,this.infoDetail).then((t=>{this.$emit("editPes"),console.log(t.data),this.$store.dispatch("stopLoading"),(0,st.qp)(t.data.msg)})).catch((t=>{console.log(t),(0,st.Jt)(t.response.data.msg)}))}},computed:{...(0,V.Se)(["getUserID"]),nutritionist_id(){return this.getUserID}},props:{infoDetail:{default:{}}},emits:["editPes"],components:{VField:G.gN,VForm:G.l0,ErrorMessage:G.Bc}};const Lt=(0,it.Z)(kt,[["render",Pt]]);var Vt=Lt;const Wt={id:"pesDelModal",ref:"pesDelModal",class:"modal fade",tabindex:"-1","aria-labelledby":"pesDelModalLabel","aria-hidden":"true"},It={class:"modal-dialog"},Ut={class:"modal-content border-0"},Ct=(0,a._)("div",{class:"modal-header bg-danger text-white"},[(0,a._)("h5",{id:"pesDelModalLabel",class:"modal-title"},[(0,a._)("span",null,"刪除紀錄")]),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),At={class:"modal-body"},qt={class:"text-danger"},Jt={class:"modal-footer"},zt=(0,a._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消",-1);function Nt(t,e,s,i,l,n){return(0,a.wg)(),(0,a.iD)("div",Wt,[(0,a._)("div",It,[(0,a._)("div",Ut,[Ct,(0,a._)("div",At,[(0,a.Uk)(" 是否刪除 "),(0,a._)("strong",qt,"病歷編號："+(0,o.zw)(s.infoDetail.diagnosis_no),1),(0,a.Uk)(" 紀錄(刪除後將無法恢復)。 ")]),(0,a._)("div",Jt,[zt,(0,a._)("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=(...t)=>n.confirmDel&&n.confirmDel(...t))},"確認刪除")])])])],512)}var Ot={data(){return{fixApi:"https://140.123.173.4"}},methods:{confirmDel(){this.$store.dispatch("startLoading");const t=`${this.fixApi}/nutritionist/nutritionalAssessmentDiagnosis/${this.nutritionist_id}/${this.infoDetail.diagnosis_no}`;this.$http.delete(t).then((t=>{this.$emit("deletePes"),console.log(t.data),this.$store.dispatch("stopLoading"),(0,st.qp)(t.data.msg)})).catch((t=>{console.log(t),(0,st.Jt)(t.response.data.msg)}))}},computed:{...(0,V.Se)(["getUserID"]),nutritionist_id(){return this.getUserID}},props:{infoDetail:{default:{}}},emits:["deletePes"]};const Zt=(0,it.Z)(Ot,[["render",Nt]]);var Kt=Zt,Bt={data(){return{fixApi:"https://140.123.173.4",searchKeyWords:"",PES_arr:[],PES_InfoDetails:{},pesModal:{},pesEditModal:{},pesDelModal:{}}},methods:{getSearch(){this.$store.dispatch("startLoading");const t=`${this.fixApi}/nutritionist/nutritionalAssessmentDiagnosis/${this.nutritionist_id}`,e=this.searchKeyWords.trim();this.$http.get(t,{params:{keyword:e}}).then((t=>{this.PES_arr=t.data[0].result,""===e?(0,st.tv)():(0,st.e$)(t.data[0].total),this.searchKeyWords="",this.$store.dispatch("stopLoading")})).catch((t=>{console.log(t)}))},getAssessmentDiagnosis(){this.$store.dispatch("startLoading");const t=`${this.fixApi}/nutritionist/nutritionalAssessmentDiagnosis/${this.nutritionist_id}`;this.$http.get(t).then((t=>{this.PES_arr=t.data[0].result,this.searchKeyWords="",this.$store.dispatch("stopLoading")})).catch((t=>{console.log(t)}))},savedLocalUserID(){const t=localStorage.getItem("userid");t&&this.$store.commit("SET_USERID",t)},formatDate(t){const e=new Date(t),s=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getDate().toString().padStart(2,"0");let o=e.getHours();const l=e.getMinutes().toString().padStart(2,"0"),n=e.getSeconds().toString().padStart(2,"0"),d=e.getHours()>=12?"PM":"AM";return o>12&&(o-=12),o=o.toString().padStart(2,"0"),`${s}/${a}/${i}, ${o}:${l}:${n} ${d}`},openModal(t,e){""===t?(this.PES_InfoDetails={},this.pesModal.show()):"editModal"===t?(this.PES_InfoDetails=JSON.parse(JSON.stringify(e)),this.pesEditModal.show()):"delModal"===t?(this.PES_InfoDetails=JSON.parse(JSON.stringify(e)),this.pesDelModal.show()):console.log("openModal Error！！")},closeModal(t){""===t?this.pesModal.hide():"editModal"===t?this.pesEditModal.hide():"delModal"===t?this.pesDelModal.hide():console.log("closeModal Error！！"),this.getAssessmentDiagnosis()}},computed:{...(0,V.Se)(["getUserID"]),...(0,V.Se)(["isLoading"]),nutritionist_id(){return this.getUserID}},components:{PesModal:lt,PesEditModal:Vt,PesDelModal:Kt,Loading:L()},created(){this.savedLocalUserID(),this.getAssessmentDiagnosis()},mounted(){this.pesModal=new P.Modal(document.getElementById("pesModal")),this.pesEditModal=new P.Modal(document.getElementById("pesEditModal")),this.pesDelModal=new P.Modal(document.getElementById("pesDelModal"))}};const Ht=(0,it.Z)(Bt,[["render",S]]);var Ft=Ht}}]);
//# sourceMappingURL=93.25ae5b77.js.map