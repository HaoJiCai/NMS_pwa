{"version":3,"file":"js/868.5ed3eeba.js","mappings":"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","sources":["webpack://vue3_pwa/./src/views/client/PatientRecordSearchPage.vue","webpack://vue3_pwa/./src/components/PatientInfoDetailsModal.vue","webpack://vue3_pwa/./src/components/PatientInfoDetailsModal.vue?8dec","webpack://vue3_pwa/./src/views/client/PatientRecordSearchPage.vue?06bf"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <label for=\"search\">\n      <div class=\"input-group mb-3\">\n        <input type=\"text\" id=\"search\" class=\"form-control\" v-model=\"searchKeyWords\" placeholder=\"輸入關鍵字\">\n        <button class=\"btn btn-outline-success searchBtn\" @click=\"searchKeyword\">查詢</button>\n      </div>\n    </label>\n    <div class=\"table-responsive\">\n      <table class=\"table table-striped table-bordered\">\n        <thead class=\"thead-dark\">\n          <tr>\n            <th scope=\"col\">姓名</th>\n            <th scope=\"col\">性別</th>\n            <th scope=\"col\">身分證字號</th>\n            <th scope=\"col\">電子信箱</th>\n            <th scope=\"col\">手機</th>\n            <th scope=\"col\"></th>\n          </tr>\n        </thead>\n        <tbody v-for=\"patient in patients\" :key=\"patient.patient_id\">\n          <tr>\n            <td>{{ patient.name }}</td>\n            <td>{{ genderText[patient.gender] }}</td>\n            <td>{{ patient.ID_Number}}</td>\n            <td>{{ patient.email }}</td>\n            <td>{{ patient.phone}}</td>\n            <td>\n              <button class=\"btn btn-outline-secondary\" @click=\"showDetails(patient.patient_id)\">詳細</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <PatientInfoDetailsModal :patientinfo-detail=\"healthConditions\"></PatientInfoDetailsModal>\n</template>\n\n<script>\n/* eslint object-curly-newline: \"off\" */\nimport * as bootstrap from 'bootstrap';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport { checkSuccessMsg, checkErrorMsg, searchNoKeyword, searchDataNum } from '../toastMessage';\nimport PatientInfoDetailsModal from '../../components/PatientInfoDetailsModal.vue';\n\nexport default {\n  data() {\n    return {\n      fixApi: 'https://140.123.173.4',\n      searchKeyWords: '',\n      patients: [],\n      // filtered_UserInfo: [],\n      patientInfoDetails_modal: {},\n      healthConditions: {\n        modalTitle: '',\n        modalContent: '',\n      },\n    };\n  },\n  computed: {\n    // 回傳 filterUserInfo 方法，所篩選出的資料\n    // filteredUserInfo() {\n    //   return this.filtered_UserInfo;\n    // },\n    genderText() {\n      return {\n        0: '女',\n        1: '男',\n      };\n    },\n  },\n  methods: {\n    // filterUserInfo() {\n    //   if (!this.searchKeyWords) {\n    //     this.filtered_UserInfo = this.userInfo;\n    //   } else {\n    //     this.filtered_UserInfo = this.userInfo.filter((user) => Object.values(user).some((val) => String(val).toLowerCase().includes(this.searchKeyWords.toLowerCase())));\n    //   }\n    // },\n    // 檢查登入驗證\n    checkedLoginStatus() {\n      // eslint-disable-next-line\n      const token = document.cookie.replace(/(?:(?:^|.*;\\s*)hasToken\\s*\\=\\s*([^;]*).*$)|^.*$/, '$1'); // 取得名為 hasToken 的 cookie\n      this.$http.defaults.headers.common.Authorization = token; // 把 Token 加入到 Headers Authorization 裡\n      // console.log(token);\n      const api = `${this.fixApi}/nutritionist/loginCheck`;\n      // 串接 /user/check API\n      this.$http.get(api).then((status) => {\n        // console.log(status);\n        if (status.data.success) {\n          checkSuccessMsg();\n        }\n      }).catch(() => {\n        checkErrorMsg();\n      });\n    },\n    searchKeyword() {\n      const api = `${this.fixApi}/patient/`;\n      const keyword = this.searchKeyWords.trim();\n\n      this.$http.get(api, { params: { keyword } }).then((res) => {\n        console.log(res.data);\n        this.patients = res.data[0].result;\n        if (keyword === '') {\n          searchNoKeyword();\n        } else {\n          searchDataNum(res.data[0].total);\n        }\n        // this.filterUserInfo();\n        this.searchKeyWords = '';\n      }).catch((err) => {\n        console.log(err);\n      });\n    },\n    search() {\n      const api = `${this.fixApi}/patient/`;\n\n      this.$http.get(api).then((res) => {\n        console.log(res.data);\n        this.patients = res.data[0].result;\n        this.searchKeyWords = '';\n      }).catch((err) => {\n        console.log(err);\n      });\n    },\n    showDetails(patientID) {\n      const api = `${this.fixApi}/patient/healthConditions/${patientID}`;\n      this.$http.get(api).then((res) => {\n        this.healthConditions = res.data;\n\n        // 設定彈跳視窗內容\n        this.healthConditions.modalTitle = `${this.healthConditions.name} 詳細資料`;\n        this.healthConditions.modalContent = `飲食醫囑：${this.healthConditions.doctorOrder}<br>`\n          + `活動狀態：${this.healthConditions.activeStatus}<br>`\n          + `運動情況：${this.healthConditions.sportsStatus}<br>`\n          + `症狀：${this.healthConditions.symptom}<br>`\n          + `疾病：${this.healthConditions.disease}<br>`\n          + `營養知識：${this.healthConditions.knowledge}<br>`\n          + `遵從度：${this.healthConditions.compliance}<br>`\n          + `身高：${this.healthConditions.height}<br>`\n          + `體重：${this.healthConditions.weight}<br>`\n          + `BMI：${this.healthConditions.bmi}<br>`\n          + `體重變化：${this.healthConditions.weight_change}<br>`\n          + `總攝（灌）食量/天：${this.healthConditions.caloriesEaten} 大卡<br>`\n          + `總需求量/天：${this.healthConditions.caloriesDemand} 大卡<br>`;\n        console.log(this.healthConditions.modalContent);\n        // 顯示 Modal 彈跳視窗\n        this.patientInfoDetails_modal.show();\n      }).catch((err) => {\n        console.log(err);\n        this.healthConditions.modalTitle = '錯誤';\n        this.healthConditions.modalContent = '獲取用戶資訊失敗。請稍後再試。';\n        this.patientInfoDetails_modal.show();\n      });\n    },\n  },\n  components: {\n    PatientInfoDetailsModal,\n  },\n  created() {\n    this.search();\n  },\n  mounted() {\n    this.checkedLoginStatus();\n\n    const modal = new bootstrap.Modal(document.getElementById('patientInfoDetailsModal'));\n    this.patientInfoDetails_modal = modal;\n  },\n};\n</script>\n<style lang=\"scss\">\n</style>\n","<template>\n  <div id=\"patientInfoDetailsModal\" ref=\"patientInfoDetailsModal\" class=\"modal\" tabindex=\"-1\" role=\"dialog\">\n    <div class=\"modal-dialog\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\">{{ patientinfoDetail.modalTitle }}</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" data-bs-dismiss=\"modal\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\" v-html=\"patientinfoDetail.modalContent\"></div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">關閉</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      api: 'https://140.123.173.4/patient/healthConditions',\n    };\n  },\n  methods: {\n  },\n  props: {\n    patientinfoDetail: {\n      default: {},\n    },\n  },\n};\n</script>\n","import { render } from \"./PatientInfoDetailsModal.vue?vue&type=template&id=294b9bf7\"\nimport script from \"./PatientInfoDetailsModal.vue?vue&type=script&lang=js\"\nexport * from \"./PatientInfoDetailsModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PatientRecordSearchPage.vue?vue&type=template&id=6b81b5b5\"\nimport script from \"./PatientRecordSearchPage.vue?vue&type=script&lang=js\"\nexport * from \"./PatientRecordSearchPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["id","for","class","_createElementVNode","scope","_hoisted_1","_hoisted_2","_hoisted_3","type","$data","searchKeyWords","$event","placeholder","onClick","_cache","args","$options","searchKeyword","_hoisted_4","_hoisted_5","_hoisted_6","_createElementBlock","_Fragment","_renderList","patients","patient","key","patient_id","_toDisplayString","name","genderText","gender","ID_Number","email","phone","showDetails","_hoisted_7","_createVNode","_component_PatientInfoDetailsModal","healthConditions","ref","tabindex","role","$props","patientinfoDetail","modalTitle","innerHTML","modalContent","_hoisted_8","data","api","methods","props","default","__exports__","fixApi","patientInfoDetails_modal","computed","checkedLoginStatus","token","document","cookie","replace","this","$http","defaults","headers","common","Authorization","get","then","status","success","checkSuccessMsg","catch","checkErrorMsg","keyword","trim","params","res","console","log","result","searchNoKeyword","searchDataNum","total","err","search","patientID","doctorOrder","activeStatus","sportsStatus","symptom","disease","knowledge","compliance","height","weight","bmi","weight_change","caloriesEaten","caloriesDemand","show","components","PatientInfoDetailsModal","created","mounted","modal","bootstrap","getElementById","render"],"sourceRoot":""}