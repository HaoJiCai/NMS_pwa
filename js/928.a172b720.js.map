{"version":3,"file":"js/928.a172b720.js","mappings":"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","sources":["webpack://vue3_pwa/./src/views/UserInfo.vue","webpack://vue3_pwa/./src/views/UserInfo.vue?8e17"],"sourcesContent":["<!--eslint-disable -->\r\n<template>\r\n  <div class=\"wrapper-info\">\r\n    <div class=\"container-info\">\r\n      <div class=\"title\">\r\n        <h2>個人資料</h2>\r\n      </div>\r\n      <div class=\"content\">\r\n        <v-form class=\"infoInputBlock\" v-slot=\"{ errors }\">\r\n          <div class=\"nameInputBlock\">\r\n            <label for=\"nameInput\">姓名：</label>\r\n            <v-field type=\"text\" id=\"nameInput\" name=\"姓名\" v-model=\"userInfo.name\" placeholder=\"請輸入姓名\" :rules=\"{ required: true, max: 10 }\" :class=\"{'is-invalid': errors['姓名']}\"></v-field>\r\n            <error-message name=\"姓名\" class=\"invalid-feedback\"></error-message>\r\n          </div>\r\n          <div class=\"accountInputBlock\">\r\n            <label for=\"accountInput\">帳號：</label>\r\n            <v-field type=\"text\" id=\"accountInput\" name=\"帳號\" v-model=\"userInfo.account\" placeholder=\"請輸入帳號\" :rules=\"{ required: true, max: 16, regex: /^[^\\u4e00-\\u9fa5]+$/ }\" :class=\"{'is-invalid': errors['帳號']}\"></v-field>\r\n            <error-message name=\"帳號\" class=\"invalid-feedback\"></error-message>\r\n          </div>\r\n          <div class=\"passwordInputBlock\">\r\n            <label for=\"passwordInput\">密碼：</label>\r\n            <v-field type=\"password\" id=\"passwordInput\" name=\"密碼\" v-model=\"userInfo.password\" placeholder=\"請輸入密碼\" :rules=\"{ required: true, max: 16, regex: /^[^\\u4e00-\\u9fa5]+$/ }\" :class=\"{'is-invalid': errors['密碼']}\"></v-field>\r\n            <error-message name=\"密碼\" class=\"invalid-feedback\"></error-message>\r\n          </div>\r\n          <div class=\"emailInputBlock\">\r\n            <label for=\"emailInput\">電子信箱：</label>\r\n            <v-field type=\"email\" id=\"emailInput\" name=\"電子信箱\" v-model=\"userInfo.email\" placeholder=\"請輸入email\" :rules=\"{ required: true, email: true, max: 30 }\" :class=\"{'is-invalid': errors['電子信箱']}\"></v-field>\r\n            <error-message name=\"電子信箱\" class=\"invalid-feedback\"></error-message>\r\n          </div>\r\n          <div class=\"phoneInputBlock\">\r\n            <label for=\"phoneInput\">手機號碼：</label>\r\n            <v-field type=\"tel\" id=\"phoneInput\" name=\"手機號碼\" v-model=\"userInfo.phone\" placeholder=\"請輸入手機號碼\" :rules=\"{ required: true, min: 10, max: 10, regex: /^09\\d{8}$/ }\" :class=\"{'is-invalid': errors['手機號碼']}\"></v-field>\r\n            <error-message name=\"手機號碼\" class=\"invalid-feedback\"></error-message>\r\n          </div>\r\n          <div class=\"btnBlock\">\r\n            <button type=\"button\" class=\"updateInfo\" @click=\"updateInfo\">更新</button>\r\n            <button type=\"button\" class=\"backStep\" @click=\"backStep\">返回</button>\r\n          </div>\r\n        </v-form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Field as VField, Form as VForm, ErrorMessage, defineRule, configure } from 'vee-validate';\r\n// 引入 VeeValidate 的驗證規則\r\nimport AllRules from '@vee-validate/rules';\r\n// 引入 VeeValidate 的 i18n 功能\r\nimport { localize, setLocale } from '@vee-validate/i18n';\r\n// 引入 VeeValidate 的繁體中文語系檔\r\nimport zhTW from '@vee-validate/i18n/dist/locale/zh_TW.json';\r\nimport { customizeSuccessMsg, customizeErrorMsg } from './toastMessage';\r\n\r\n// 使用 Object.keys 將 AllRules 轉為陣列並使用 forEach 迴圈將驗證規則加入 VeeValidate\r\nObject.keys(AllRules).forEach((rule) => {\r\n  defineRule(rule, AllRules[rule]);\r\n});\r\n// 將當前 VeeValidate 的語系設定為繁體中文\r\nconfigure({\r\n  generateMessage: localize({ zh_TW: zhTW }),\r\n  validateOnInput: true,\r\n});\r\nsetLocale('zh_TW');\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      userInfo: {},\r\n    };\r\n  },\r\n  methods: {\r\n    getUserInfo() {\r\n      const baseURL = 'https://140.123.173.4';\r\n      const infoAPI = '/nutritionist/info';\r\n      const savedUserid = localStorage.getItem('userid');\r\n      this.$http.get(`${baseURL}${infoAPI}/${savedUserid}`).then((res) => {\r\n        // console.log(res.data);\r\n        this.userInfo = { ...res.data[0] };\r\n      });\r\n    },\r\n    updateInfo() {\r\n      const baseURL = 'https://140.123.173.4';\r\n      const infoAPI = '/nutritionist/info';\r\n      const savedUserid = localStorage.getItem('userid');\r\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/; // email正規表達式\r\n      const phoneRegex = /^09\\d{8}$/; // 手機正規表達式\r\n      const chineseRegex = /[\\u4e00-\\u9fa5]/; // 中文正規表達式\r\n      if (this.userInfo.name === '' || this.userInfo.account === '' || this.userInfo.password === '' || this.userInfo.email === '' || this.userInfo.phone === '') {\r\n        customizeErrorMsg('請填寫完整資訊');\r\n      } else if (!emailRegex.test(this.userInfo.email)) {\r\n        customizeErrorMsg('請確認電子信箱格式');\r\n      } else if (!phoneRegex.test(this.userInfo.phone)) {\r\n        customizeErrorMsg('請確認手機號碼格式');\r\n      } else if (this.userInfo.name.length > 10) {\r\n        customizeErrorMsg('姓名不能超過10個字元');\r\n      } else if (this.userInfo.account.length > 16 || this.userInfo.password.length > 16) {\r\n        console.log(this.userInfo.account, this.userInfo.password);\r\n        customizeErrorMsg('帳號與密碼不能超過16個字元');\r\n      } else if (chineseRegex.test(this.userInfo.account) || chineseRegex.test(this.userInfo.password)) {\r\n        customizeErrorMsg('帳號與密碼不能包含中文');\r\n      } else {\r\n        this.$http.put(`${baseURL}${infoAPI}/${savedUserid}`, this.userInfo)\r\n          .then((res) => {\r\n            console.log(res.data);\r\n            if (res.data.success) {\r\n              customizeSuccessMsg(res.data.msg);\r\n              this.$router.push('/userLogin');\r\n            } else {\r\n              customizeErrorMsg(res.data.msg);\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n            customizeErrorMsg('更新資料失敗');\r\n          });\r\n      }\r\n    },\r\n    backStep() {\r\n      this.$router.push('/frontEnd/homePage'); // 返回登入畫面\r\n    },\r\n  },\r\n  components: {\r\n    VField,\r\n    VForm,\r\n    ErrorMessage,\r\n  },\r\n  created() {\r\n    this.getUserInfo();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  // 設定電腦版（預設）\r\n  .wrapper-info {\r\n    margin: 0 auto;\r\n    background-color: #333;\r\n    height: 100vh; /* 將高度設置為視窗高度 */\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    .container-info {\r\n      max-width: 600px;\r\n      padding: 30px 150px;\r\n      background-color: #dbd9d7;\r\n      border-radius: 8px;\r\n      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n      .title {\r\n        text-align: center;\r\n        margin-bottom: 20px;\r\n        h2 {\r\n          font-weight: bold;\r\n          font-size: 30px;\r\n          color: #333;\r\n        }\r\n      }\r\n      .content {\r\n        .infoInputBlock {\r\n          .nameInputBlock,\r\n          .accountInputBlock,\r\n          .passwordInputBlock,\r\n          .emailInputBlock,\r\n          .phoneInputBlock {\r\n            margin-bottom: 10px;\r\n            label {\r\n              display: block;\r\n              font-size: 22px;\r\n              color: #555;\r\n              margin-bottom: 5px;\r\n            }\r\n            input {\r\n              width: 100%;\r\n              padding: 6px;\r\n              border: 1px solid #ccc;\r\n              border-radius: 4px;\r\n              background-color: whitesmoke;\r\n              font-size: 20px;\r\n              &.is-invalid {\r\n                border-color: rgba(213, 0, 0, 0.493);\r\n              }\r\n            }\r\n            .invalid-feedback {\r\n              color: rgba(213, 0, 0, 0.493);\r\n              font-weight: 600;\r\n              font-size: 18px;\r\n              margin-top: 5px;\r\n            }\r\n          }\r\n          .btnBlock {\r\n            .updateInfo {\r\n              background-color: #4caf50;\r\n              color: #fff;\r\n              padding: 10px 15px;\r\n              border: none;\r\n              border-radius: 4px;\r\n              margin-top: 20px;\r\n              cursor: pointer;\r\n              font-size: 16px;\r\n              &:hover {\r\n                background-color: #45a049;\r\n              }\r\n            }\r\n            .backStep {\r\n              background-color: #388ad6;\r\n              color: #fff;\r\n              padding: 10px 15px;\r\n              border: none;\r\n              border-radius: 4px;\r\n              margin-top: 20px;\r\n              cursor: pointer;\r\n              font-size: 16px;\r\n              margin-left: 30px;\r\n              &:hover {\r\n                background-color: rgb(42, 121, 178);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // 設定平板版\r\n  @media screen and (max-width: 1024px) {\r\n    .wrapper-info {\r\n      .container-info {\r\n        padding: 30px 120px;\r\n        .title {\r\n          text-align: center;\r\n          margin-bottom: 20px;\r\n          h2 {\r\n            font-size: 28px;\r\n          }\r\n        }\r\n        .content {\r\n          .infoInputBlock {\r\n            .nameInputBlock,\r\n            .accountInputBlock,\r\n            .passwordInputBlock,\r\n            .emailInputBlock,\r\n            .phoneInputBlock {\r\n              margin-bottom: 10px;\r\n              label {\r\n                display: block;\r\n                font-size: 20px;\r\n                color: #555;\r\n                margin-bottom: 5px;\r\n              }\r\n              input {\r\n                width: 100%;\r\n                padding: 10px;\r\n                font-size: 18px;\r\n              }\r\n              .invalid-feedback {\r\n                font-size: 18px;\r\n                margin-top: 5px;\r\n              }\r\n            }\r\n            .btnBlock {\r\n              .updateInfo {\r\n                padding: 10px 15px;\r\n                font-size: 16px;\r\n              }\r\n              .backStep {\r\n                margin-left: 20px;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // 設定手機板\r\n  @media screen and (max-width: 768px) {\r\n    .wrapper-info {\r\n      .container-info {\r\n        padding: 20px 50px;\r\n        .title {\r\n          text-align: center;\r\n          margin-bottom: 20px;\r\n          h2 {\r\n            font-size: 26px;\r\n          }\r\n        }\r\n        .content {\r\n          .infoInputBlock {\r\n            .nameInputBlock,\r\n            .accountInputBlock,\r\n            .passwordInputBlock,\r\n            .emailInputBlock,\r\n            .phoneInputBlock {\r\n              margin-bottom: 5px;\r\n              label {\r\n                display: block;\r\n                font-size: 16px;\r\n                color: #555;\r\n                margin-bottom: 5px;\r\n              }\r\n              input {\r\n                width: 100%;\r\n                padding: 4px;\r\n                font-size: 14px;\r\n              }\r\n              .invalid-feedback {\r\n                font-size: 14px;\r\n                margin-top: 5px;\r\n              }\r\n            }\r\n            .btnBlock {\r\n              .updateInfo {\r\n                padding: 10px 15px;\r\n                font-size: 16px;\r\n              }\r\n              .backStep {\r\n                margin-left: 10px;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./UserInfo.vue?vue&type=template&id=cdb2e698\"\nimport script from \"./UserInfo.vue?vue&type=script&lang=js\"\nexport * from \"./UserInfo.vue?vue&type=script&lang=js\"\n\nimport \"./UserInfo.vue?vue&type=style&index=0&id=cdb2e698&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_component_v_form","errors","_hoisted_5","_hoisted_6","_component_v_field","type","id","name","$data","userInfo","$event","placeholder","rules","required","max","_normalizeClass","_component_error_message","_hoisted_7","_hoisted_8","account","regex","_hoisted_9","_hoisted_10","password","_hoisted_11","_hoisted_12","email","_hoisted_13","_hoisted_14","phone","min","_hoisted_15","onClick","_cache","args","$options","updateInfo","backStep","Object","keys","AllRules","forEach","rule","defineRule","configure","generateMessage","localize","zh_TW","zhTW","validateOnInput","setLocale","data","methods","getUserInfo","baseURL","infoAPI","savedUserid","localStorage","getItem","this","$http","get","then","res","emailRegex","phoneRegex","chineseRegex","customizeErrorMsg","test","length","console","log","put","success","customizeSuccessMsg","msg","$router","push","catch","err","components","VField","VForm","ErrorMessage","created","__exports__","render"],"sourceRoot":""}