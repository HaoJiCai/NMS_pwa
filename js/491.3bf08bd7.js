"use strict";(self["webpackChunkvue3_pwa"]=self["webpackChunkvue3_pwa"]||[]).push([[491],{4491:function(t,e,a){a.r(e),a.d(e,{default:function(){return E}});var o=a(3396),n=a(9242),s=a(7139);const i={id:"app"},l={for:"search"},d={class:"input-group mb-3"},c=(0,o._)("i",{class:"bi bi-search"},null,-1),h=[c],r={class:"table-responsive"},p={class:"table table-striped table-bordered"},u=(0,o._)("thead",{class:"thead-dark"},[(0,o._)("tr",null,[(0,o._)("th",{scope:"col"},"姓名"),(0,o._)("th",{scope:"col"},"性別"),(0,o._)("th",{scope:"col"},"身分證字號"),(0,o._)("th",{scope:"col"},"電子信箱"),(0,o._)("th",{scope:"col"},"手機"),(0,o._)("th",{scope:"col"})])],-1),_=["onClick"],m=(0,o._)("i",{class:"bi bi-eye-fill"},null,-1),f=[m];function g(t,e,a,c,m,g){const w=(0,o.up)("loading"),b=(0,o.up)("PatientInfoDetailsModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",i,[(0,o._)("label",l,[(0,o._)("div",d,[(0,o.wy)((0,o._)("input",{type:"text",id:"search",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>m.searchKeyWords=t),placeholder:"輸入關鍵字"},null,512),[[n.nr,m.searchKeyWords]]),(0,o._)("button",{class:"btn btn-outline-success searchBtn",onClick:e[1]||(e[1]=(...t)=>g.searchKeyword&&g.searchKeyword(...t))},h)])]),(0,o._)("div",r,[(0,o._)("table",p,[u,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(m.patients,(t=>((0,o.wg)(),(0,o.iD)("tbody",{key:t.patient_id},[(0,o._)("tr",null,[(0,o._)("td",null,(0,s.zw)(t.name),1),(0,o._)("td",null,(0,s.zw)(g.genderText[t.gender]),1),(0,o._)("td",null,(0,s.zw)(t.ID_Number),1),(0,o._)("td",null,(0,s.zw)(t.email),1),(0,o._)("td",null,(0,s.zw)(t.phone),1),(0,o._)("td",null,[(0,o._)("button",{class:"btn btn-outline-secondary",onClick:e=>g.showDetails(t.patient_id)},f,8,_)])])])))),128))])]),(0,o.Wm)(w,{active:t.isLoading},null,8,["active"])]),(0,o.Wm)(b,{"patientinfo-detail":m.healthConditions},null,8,["patientinfo-detail"])],64)}var w=a(2166),b=a(5513),D=a.n(b),y=a(65),C=a(8456);const v={id:"patientInfoDetailsModal",ref:"patientInfoDetailsModal",class:"modal",tabindex:"-1",role:"dialog"},I={class:"modal-dialog",role:"document"},$={class:"modal-content"},z={class:"modal-header"},k={class:"modal-title"},K={class:"modal-body"},N={class:"selectedPatient"},x=(0,o._)("label",{for:"condNo",class:"searchDateLabel"},"查詢日期：",-1),A=(0,o._)("option",{value:"",selected:"",disabled:""},"請選擇日期",-1),L=["value"],M={class:"modal-footer"};function S(t,e,a,i,l,d){return(0,o.wg)(),(0,o.iD)("div",v,[(0,o._)("div",I,[(0,o._)("div",$,[(0,o._)("div",z,[(0,o._)("h5",k,(0,s.zw)(a.patientinfoDetail.modalTitle),1),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e[0]||(e[0]=(...t)=>d.close_btn&&d.close_btn(...t))})]),(0,o._)("div",K,[(0,o._)("div",N,[x,(0,o.wy)((0,o._)("select",{id:"condNo",class:"searchDateSelect","onUpdate:modelValue":e[1]||(e[1]=t=>l.selectedCondNo=t)},[A,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(d.patientInfoArray,(t=>((0,o.wg)(),(0,o.iD)("option",{value:t.cond_no,key:t.cond_no},(0,s.zw)(d.formatDate(t.date)),9,L)))),128))],512),[[n.bM,l.selectedCondNo]])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.patientInfos,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"patientInfo",key:t.cond_no},[(0,o._)("p",null,"飲食醫囑："+(0,s.zw)(t.doctorOrder),1),(0,o._)("p",null,"活動狀態："+(0,s.zw)(t.activeStatus),1),(0,o._)("p",null,"運動情況："+(0,s.zw)(t.sportsStatus),1),(0,o._)("p",null,"症狀："+(0,s.zw)(t.symptom),1),(0,o._)("p",null,"疾病："+(0,s.zw)(t.disease),1),(0,o._)("p",null,"營養知識："+(0,s.zw)(t.knowledge),1),(0,o._)("p",null,"遵從度："+(0,s.zw)(t.compliance),1),(0,o._)("p",null,"身高："+(0,s.zw)(t.height),1),(0,o._)("p",null,"體重："+(0,s.zw)(t.weight),1),(0,o._)("p",null,"BMI："+(0,s.zw)(t.bmi),1),(0,o._)("p",null,"體重變化："+(0,s.zw)(t.weight_change),1),(0,o._)("p",null,"總攝（灌）食量/天："+(0,s.zw)(t.caloriesEaten),1),(0,o._)("p",null,"總需求量/天："+(0,s.zw)(t.caloriesDemand),1)])))),128))]),(0,o._)("div",M,[(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[2]||(e[2]=(...t)=>d.close_btn&&d.close_btn(...t))},"關閉")])])])],512)}var W={data(){return{fixApi:"https://140.123.173.4",selectedCondNo:"",patientInfos:{}}},methods:{getPatientInfos(){this.patientInfos={};let t="";if(this.patientInfoArray.forEach((e=>{t=e.patient_id})),""!==this.selectedCondNo){const e=`${this.fixApi}/patient/healthConditions/${t}/${this.selectedCondNo}`;this.$http.get(e).then((t=>{this.patientInfos=t.data})).catch((t=>{console.log(t)}))}},close_btn(){this.selectedCondNo="",this.getPatientInfos()},formatDate(t){const e=new Date(t),a=e.getFullYear(),o=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0");return`${a}-${o}-${n}`}},watch:{selectedCondNo:{handler(){this.getPatientInfos()},deep:!0,immediate:!1}},computed:{patientInfoArray(){const t=Array.from(this.patientinfoDetail);return t}},props:{patientinfoDetail:{default:[]}},created(){this.selectedCondNo="",this.getPatientInfos()}},P=a(89);const T=(0,P.Z)(W,[["render",S]]);var Y=T,H={data(){return{fixApi:"https://140.123.173.4",searchKeyWords:"",patients:[],patientInfoDetails_modal:{},healthConditions:{modalTitle:"",modalContent:""}}},computed:{...(0,y.Se)(["isLoading"]),genderText(){return{0:"女",1:"男"}}},methods:{searchKeyword(){this.$store.dispatch("startLoading");const t=`${this.fixApi}/patient`,e=this.searchKeyWords.trim();this.$http.get(t,{params:{keyword:e}}).then((t=>{console.log(t.data),this.patients=t.data[0].result,""===e?(0,C.tv)():(0,C.e$)(t.data[0].total),this.searchKeyWords="",this.$store.dispatch("stopLoading")})).catch((t=>{console.log(t)}))},search(){this.$store.dispatch("startLoading");const t=`${this.fixApi}/patient`;this.$http.get(t).then((t=>{this.patients=t.data[0].result,this.searchKeyWords="",this.$store.dispatch("stopLoading")})).catch((t=>{console.log(t)}))},showDetails(t){this.$store.dispatch("startLoading");const e=`${this.fixApi}/patient/healthConditions/${t}`;this.$http.get(e).then((t=>{this.healthConditions=t.data,console.log(t.data),this.healthConditions.modalTitle=`${this.healthConditions[0].name} 詳細資料`,this.patientInfoDetails_modal.show(),this.$store.dispatch("stopLoading")})).catch((t=>{console.log(t),this.healthConditions.modalTitle="錯誤",this.healthConditions.modalContent="獲取用戶資訊失敗。請稍後再試。",this.patientInfoDetails_modal.show()}))}},components:{PatientInfoDetailsModal:Y,Loading:D()},created(){this.search()},mounted(){const t=new w.Modal(document.getElementById("patientInfoDetailsModal"));this.patientInfoDetails_modal=t}};const B=(0,P.Z)(H,[["render",g]]);var E=B}}]);
//# sourceMappingURL=491.3bf08bd7.js.map