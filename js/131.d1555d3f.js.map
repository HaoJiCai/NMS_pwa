{"version":3,"file":"js/131.d1555d3f.js","mappings":"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","sources":["webpack://vue3_pwa/./src/views/client/PatientRecordSearchPage.vue","webpack://vue3_pwa/./src/components/PatientInfoDetailsModal.vue","webpack://vue3_pwa/./src/components/PatientInfoDetailsModal.vue?8dec","webpack://vue3_pwa/./src/views/client/PatientRecordSearchPage.vue?06bf"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <label for=\"search\">\r\n      <div class=\"input-group mb-3\">\r\n        <input type=\"text\" id=\"search\" class=\"form-control\" v-model=\"searchKeyWords\" placeholder=\"輸入關鍵字\">\r\n        <button class=\"btn btn-outline-success searchBtn\" @click=\"searchKeyword\"><i class=\"bi bi-search\"></i></button>\r\n      </div>\r\n    </label>\r\n    <div class=\"table-responsive\">\r\n      <table class=\"table table-striped table-bordered\">\r\n        <thead class=\"thead-dark\">\r\n          <tr>\r\n            <th scope=\"col\">姓名</th>\r\n            <th scope=\"col\">性別</th>\r\n            <th scope=\"col\">身分證字號</th>\r\n            <th scope=\"col\">電子信箱</th>\r\n            <th scope=\"col\">手機</th>\r\n            <th scope=\"col\"></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody v-for=\"patient in patients\" :key=\"patient.patient_id\">\r\n          <tr>\r\n            <td>{{ patient.name }}</td>\r\n            <td>{{ genderText[patient.gender] }}</td>\r\n            <td>{{ patient.ID_Number}}</td>\r\n            <td>{{ patient.email }}</td>\r\n            <td>{{ patient.phone}}</td>\r\n            <td>\r\n              <button class=\"btn btn-outline-secondary\" @click=\"showDetails(patient.patient_id)\"><i class=\"bi bi-eye-fill\"></i></button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n  <PatientInfoDetailsModal :patientinfo-detail=\"healthConditions\"></PatientInfoDetailsModal>\r\n</template>\r\n\r\n<script>\r\n/* eslint object-curly-newline: \"off\" */\r\nimport * as bootstrap from 'bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport { checkSuccessMsg, checkErrorMsg, searchNoKeyword, searchDataNum } from '../toastMessage';\r\nimport PatientInfoDetailsModal from '../../components/PatientInfoDetailsModal.vue';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      fixApi: 'https://140.123.173.4',\r\n      searchKeyWords: '',\r\n      patients: [],\r\n      // filtered_UserInfo: [],\r\n      patientInfoDetails_modal: {},\r\n      healthConditions: {\r\n        modalTitle: '',\r\n        modalContent: '',\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    // 回傳 filterUserInfo 方法，所篩選出的資料\r\n    // filteredUserInfo() {\r\n    //   return this.filtered_UserInfo;\r\n    // },\r\n    genderText() {\r\n      return {\r\n        0: '女',\r\n        1: '男',\r\n      };\r\n    },\r\n  },\r\n  methods: {\r\n    // filterUserInfo() {\r\n    //   if (!this.searchKeyWords) {\r\n    //     this.filtered_UserInfo = this.userInfo;\r\n    //   } else {\r\n    //     this.filtered_UserInfo = this.userInfo.filter((user) => Object.values(user).some((val) => String(val).toLowerCase().includes(this.searchKeyWords.toLowerCase())));\r\n    //   }\r\n    // },\r\n    // 檢查登入驗證\r\n    checkedLoginStatus() {\r\n      // eslint-disable-next-line\r\n      const token = document.cookie.replace(/(?:(?:^|.*;\\s*)hasToken\\s*\\=\\s*([^;]*).*$)|^.*$/, '$1'); // 取得名為 hasToken 的 cookie\r\n      this.$http.defaults.headers.common.Authorization = token; // 把 Token 加入到 Headers Authorization 裡\r\n      // console.log(token);\r\n      const api = `${this.fixApi}/nutritionist/loginCheck`;\r\n      // 串接 /user/check API\r\n      this.$http.get(api).then((status) => {\r\n        // console.log(status);\r\n        if (status.data.success) {\r\n          checkSuccessMsg();\r\n        }\r\n      }).catch(() => {\r\n        checkErrorMsg();\r\n      });\r\n    },\r\n    searchKeyword() {\r\n      const api = `${this.fixApi}/patient/`;\r\n      const keyword = this.searchKeyWords.trim();\r\n\r\n      this.$http.get(api, { params: { keyword } }).then((res) => {\r\n        console.log(res.data);\r\n        this.patients = res.data[0].result;\r\n        if (keyword === '') {\r\n          searchNoKeyword();\r\n        } else {\r\n          searchDataNum(res.data[0].total);\r\n        }\r\n        // this.filterUserInfo();\r\n        this.searchKeyWords = '';\r\n      }).catch((err) => {\r\n        console.log(err);\r\n      });\r\n    },\r\n    search() {\r\n      const api = `${this.fixApi}/patient/`;\r\n\r\n      this.$http.get(api).then((res) => {\r\n        console.log(res.data);\r\n        this.patients = res.data[0].result;\r\n        this.searchKeyWords = '';\r\n      }).catch((err) => {\r\n        console.log(err);\r\n      });\r\n    },\r\n    showDetails(patientID) {\r\n      const api = `${this.fixApi}/patient/healthConditions/${patientID}`;\r\n      this.$http.get(api).then((res) => {\r\n        this.healthConditions = res.data;\r\n\r\n        // 設定彈跳視窗內容\r\n        this.healthConditions.modalTitle = `${this.healthConditions.name} 詳細資料`;\r\n        this.healthConditions.modalContent = `飲食醫囑：${this.healthConditions.doctorOrder}<br>`\r\n          + `活動狀態：${this.healthConditions.activeStatus}<br>`\r\n          + `運動情況：${this.healthConditions.sportsStatus}<br>`\r\n          + `症狀：${this.healthConditions.symptom}<br>`\r\n          + `疾病：${this.healthConditions.disease}<br>`\r\n          + `營養知識：${this.healthConditions.knowledge}<br>`\r\n          + `遵從度：${this.healthConditions.compliance}<br>`\r\n          + `身高：${this.healthConditions.height}<br>`\r\n          + `體重：${this.healthConditions.weight}<br>`\r\n          + `BMI：${this.healthConditions.bmi}<br>`\r\n          + `體重變化：${this.healthConditions.weight_change}<br>`\r\n          + `總攝（灌）食量/天：${this.healthConditions.caloriesEaten} 大卡<br>`\r\n          + `總需求量/天：${this.healthConditions.caloriesDemand} 大卡<br>`;\r\n        console.log(this.healthConditions.modalContent);\r\n        // 顯示 Modal 彈跳視窗\r\n        this.patientInfoDetails_modal.show();\r\n      }).catch((err) => {\r\n        console.log(err);\r\n        this.healthConditions.modalTitle = '錯誤';\r\n        this.healthConditions.modalContent = '獲取用戶資訊失敗。請稍後再試。';\r\n        this.patientInfoDetails_modal.show();\r\n      });\r\n    },\r\n  },\r\n  components: {\r\n    PatientInfoDetailsModal,\r\n  },\r\n  created() {\r\n    this.search();\r\n  },\r\n  mounted() {\r\n    this.checkedLoginStatus();\r\n\r\n    const modal = new bootstrap.Modal(document.getElementById('patientInfoDetailsModal'));\r\n    this.patientInfoDetails_modal = modal;\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n</style>\r\n","<template>\r\n  <div id=\"patientInfoDetailsModal\" ref=\"patientInfoDetailsModal\" class=\"modal\" tabindex=\"-1\" role=\"dialog\">\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\">{{ patientinfoDetail.modalTitle }}</h5>\r\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n        </div>\r\n        <div class=\"modal-body\" v-html=\"patientinfoDetail.modalContent\"></div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">關閉</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      api: 'https://140.123.173.4/patient/healthConditions',\r\n    };\r\n  },\r\n  methods: {\r\n  },\r\n  props: {\r\n    patientinfoDetail: {\r\n      default: {},\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.modal-content {\r\n  .modal-header {\r\n  }\r\n  .modal-body {\r\n    text-align: left;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./PatientInfoDetailsModal.vue?vue&type=template&id=2aadcc39\"\nimport script from \"./PatientInfoDetailsModal.vue?vue&type=script&lang=js\"\nexport * from \"./PatientInfoDetailsModal.vue?vue&type=script&lang=js\"\n\nimport \"./PatientInfoDetailsModal.vue?vue&type=style&index=0&id=2aadcc39&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PatientRecordSearchPage.vue?vue&type=template&id=ce4de65c\"\nimport script from \"./PatientRecordSearchPage.vue?vue&type=script&lang=js\"\nexport * from \"./PatientRecordSearchPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["id","for","class","_createElementVNode","_hoisted_4","scope","_hoisted_10","_hoisted_1","_hoisted_2","_hoisted_3","type","$data","searchKeyWords","$event","placeholder","onClick","_cache","args","$options","searchKeyword","_hoisted_6","_hoisted_7","_hoisted_8","_createElementBlock","_Fragment","_renderList","patients","patient","key","patient_id","_toDisplayString","name","genderText","gender","ID_Number","email","phone","showDetails","_createVNode","_component_PatientInfoDetailsModal","healthConditions","ref","tabindex","role","_hoisted_5","$props","patientinfoDetail","modalTitle","innerHTML","modalContent","data","api","methods","props","default","__exports__","fixApi","patientInfoDetails_modal","computed","checkedLoginStatus","token","document","cookie","replace","this","$http","defaults","headers","common","Authorization","get","then","status","success","checkSuccessMsg","catch","checkErrorMsg","keyword","trim","params","res","console","log","result","searchNoKeyword","searchDataNum","total","err","search","patientID","doctorOrder","activeStatus","sportsStatus","symptom","disease","knowledge","compliance","height","weight","bmi","weight_change","caloriesEaten","caloriesDemand","show","components","PatientInfoDetailsModal","created","mounted","modal","bootstrap","getElementById","render"],"sourceRoot":""}