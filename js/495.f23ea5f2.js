"use strict";(self["webpackChunkvue3_pwa"]=self["webpackChunkvue3_pwa"]||[]).push([[495],{4495:function(t,n,o){o.r(n),o.d(n,{default:function(){return f}});var e=o(3396),s=o(9242);const i={class:"wrapper"},r={class:"container_login"},a={class:"loginBlock"},l=(0,e._)("h1",null,"營養師登入",-1),u={class:"loginInputBlock"},c={for:"accountInput"},p={for:"passwordInput"};function d(t,n,o,d,h,g){return(0,e.wg)(),(0,e.iD)("div",i,[(0,e._)("div",r,[(0,e._)("div",a,[l,(0,e._)("form",u,[(0,e._)("label",c,[(0,e.wy)((0,e._)("input",{type:"text",id:"accountInput","onUpdate:modelValue":n[0]||(n[0]=t=>h.nutritionist.account=t),placeholder:"Email Address",requried:""},null,512),[[s.nr,h.nutritionist.account]])]),(0,e._)("label",p,[(0,e.wy)((0,e._)("input",{type:"password",id:"passwordInput","onUpdate:modelValue":n[1]||(n[1]=t=>h.nutritionist.password=t),placeholder:"Password",requried:"",autocomplete:"off"},null,512),[[s.nr,h.nutritionist.password]])]),(0,e._)("button",{type:"button",id:"signinBtn",class:"signinBtn",onClick:n[2]||(n[2]=(...t)=>g.login&&g.login(...t))},"登入")])])])])}o(7658);var h=o(8456),g={data(){return{nutritionist:{account:"",password:""}}},methods:{login(){const t="https://140.123.173.4",n="/nutritionist/login";this.$http.post(`${t}${n}`,this.nutritionist).then((t=>{if(console.log(t.data),t.data.success){const{token:n,expired:o,id:e,name:s}=t.data;return this.$store.commit("SET_USERID",e),this.$store.dispatch("login",s),document.cookie=`hasToken=${n}; expires=${new Date(o)};`,this.triggerInstallPrompt(),(0,h.oA)()}return(0,h.BL)()})).then((()=>{this.$router.push("/frontEnd/homepage")})).catch((t=>{console.log(t),(0,h.BL)()}))},triggerInstallPrompt(){window.addEventListener("beforeinstallprompt",(t=>{t.preventDefault(),t.prompt(),t.userChoice.then((t=>{"accepted"===t.outcome?console.log("使用者已安裝 PWA"):console.log("使用者拒絕安裝 PWA")}))}))}}},w=o(89);const m=(0,w.Z)(g,[["render",d]]);var f=m}}]);
//# sourceMappingURL=495.f23ea5f2.js.map