"use strict";(self["webpackChunkvue3_pwa"]=self["webpackChunkvue3_pwa"]||[]).push([[481],{7481:function(t,e,o){o.r(e),o.d(e,{default:function(){return Lt}});var a=o(3396),s=o(7139);const i={class:"container-page row"},l={class:"row d-flex align-items-center"},n=(0,a._)("h3",{class:"col text-start"},"營養評估診斷",-1),d={class:"col text-end"},r={class:"table-responsive"},c={class:"table table-striped table-bordered"},m=(0,a._)("thead",{class:"thead-dark"},[(0,a._)("tr",null,[(0,a._)("th",{scope:"col"},"病患ID"),(0,a._)("th",{scope:"col"},"姓名"),(0,a._)("th",{scope:"col"},"初始建立時間"),(0,a._)("th",{scope:"col"},"最近更新時間"),(0,a._)("th",{scope:"col"},"編輯")])],-1),p={class:"btn-group"},u=["onClick"],_=["onClick"];function b(t,e,o,b,f,g){const h=(0,a.up)("loading"),D=(0,a.up)("PesModal"),y=(0,a.up)("PesEditModal"),v=(0,a.up)("PesDelModal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",i,[(0,a._)("div",l,[n,(0,a._)("div",d,[(0,a._)("button",{class:"btn btn-dark",onClick:e[0]||(e[0]=t=>g.openModal(""))},"建立")])]),(0,a._)("div",r,[(0,a._)("table",c,[m,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(f.PES_arr,(t=>((0,a.wg)(),(0,a.iD)("tbody",{key:t.diagnosis_no},[(0,a._)("tr",null,[(0,a._)("td",null,(0,s.zw)(t.patient_id),1),(0,a._)("td",null,(0,s.zw)(t.name),1),(0,a._)("td",null,(0,s.zw)(g.formatDate(t.create_time)),1),(0,a._)("td",null,(0,s.zw)(g.formatDate(t.update_time)),1),(0,a._)("td",null,[(0,a._)("div",p,[(0,a._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:e=>g.openModal("editModal",t)},"編輯",8,u),(0,a._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:e=>g.openModal("delModal",t)},"刪除",8,_)])])])])))),128))])]),(0,a.Wm)(h,{active:t.isLoading},null,8,["active"])]),(0,a.Wm)(D,{"info-detail":f.PES_InfoDetails,onAddPes:e[1]||(e[1]=t=>g.closeModal(""))},null,8,["info-detail"]),(0,a.Wm)(y,{"info-detail":f.PES_InfoDetails,onEditPes:e[2]||(e[2]=t=>g.closeModal("editModal"))},null,8,["info-detail"]),(0,a.Wm)(v,{"info-detail":f.PES_InfoDetails,onDeletePes:e[3]||(e[3]=t=>g.closeModal("delModal"))},null,8,["info-detail"])],64)}var f=o(2166),g=o(5513),h=o.n(g),D=o(65),y=o(9242);const v={id:"pesModal",ref:"pesModal",class:"modal fade",tabindex:"-1","aria-labelledby":"pesModalLabel","aria-hidden":"true"},M={class:"modal-dialog modal-xl"},w={class:"modal-content border-0"},x=(0,a._)("div",{class:"modal-header bg-dark text-white"},[(0,a._)("h5",{id:"pesModalLabel",class:"modal-title"},[(0,a._)("span",null,"建立紀錄")]),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),E={class:"modal-body"},S={class:"row"},P={class:"col-sm"},$={class:"row mb-3"},U={class:"form-group col-md-6"},k=(0,a._)("label",{for:"patient_id"},"病患編號：",-1),I={class:"form-group col-md-6"},A=(0,a._)("label",{for:"patient_name"},"姓名：",-1),L={class:"form-textarea mb-4"},C=(0,a._)("div",{class:"form-label"},[(0,a._)("label",{for:"problem"},"Problem：")],-1),q={class:"form-textarea mb-4"},V=(0,a._)("div",{class:"form-label"},[(0,a._)("label",{for:"etiology"},"Etiology：")],-1),J={class:"form-textarea mb-4"},z=(0,a._)("div",{class:"form-label"},[(0,a._)("label",{for:"symptoms"},"Symptoms：")],-1),H={class:"modal-footer"},N=(0,a._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消",-1);function O(t,e,o,s,i,l){return(0,a.wg)(),(0,a.iD)("div",v,[(0,a._)("div",M,[(0,a._)("div",w,[x,(0,a._)("div",E,[(0,a._)("div",S,[(0,a._)("div",P,[(0,a._)("div",$,[(0,a._)("div",U,[k,(0,a.wy)((0,a._)("input",{id:"patient_id",type:"number","onUpdate:modelValue":e[0]||(e[0]=t=>o.infoDetail.patient_id=t),min:"1",max:"9999999",required:""},null,512),[[y.nr,o.infoDetail.patient_id]])]),(0,a._)("div",I,[A,(0,a.wy)((0,a._)("input",{id:"patient_name",type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>o.infoDetail.name=t),maxlength:"10",required:""},null,512),[[y.nr,o.infoDetail.name]])])]),(0,a._)("div",L,[C,(0,a.wy)((0,a._)("textarea",{id:"problem",type:"text",name:"textarea",class:"form-control",rows:"10",cols:"30","onUpdate:modelValue":e[2]||(e[2]=t=>o.infoDetail.problem=t),required:""},null,512),[[y.nr,o.infoDetail.problem]])]),(0,a._)("div",q,[V,(0,a.wy)((0,a._)("textarea",{id:"etiology",type:"text",name:"textarea",class:"form-control",rows:"10",cols:"30","onUpdate:modelValue":e[3]||(e[3]=t=>o.infoDetail.etiology=t),required:""},null,512),[[y.nr,o.infoDetail.etiology]])]),(0,a._)("div",J,[z,(0,a.wy)((0,a._)("textarea",{id:"etiology",type:"text",name:"textarea",class:"form-control",rows:"10",cols:"30","onUpdate:modelValue":e[4]||(e[4]=t=>o.infoDetail.symptoms=t),required:""},null,512),[[y.nr,o.infoDetail.symptoms]])])])])]),(0,a._)("div",H,[N,(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=(...t)=>l.confirmPost&&l.confirmPost(...t))},"確認")])])])],512)}var W=o(8456),Z={data(){return{fixApi:"https://140.123.173.4"}},methods:{confirmPost(){this.$store.dispatch("startLoading");const t=`${this.fixApi}/nutritionist/nutritionalAssessmentDiagnosis/${this.nutritionist_id}`;this.$http.post(t,this.infoDetail).then((t=>{this.$emit("addPes"),console.log(t.data),setTimeout((()=>{this.$store.dispatch("stopLoading")}),350),(0,W.qp)(t.data.msg)})).catch((t=>{console.log(t),(0,W.Jt)(t.response.data.msg)}))}},computed:{...(0,D.Se)(["getUserID"]),nutritionist_id(){return this.getUserID}},props:{infoDetail:{default:{}}},emits:["addPes"]},B=o(89);const T=(0,B.Z)(Z,[["render",O]]);var Y=T;const F={id:"pesEditModal",ref:"pesEditModal",class:"modal fade",tabindex:"-1","aria-labelledby":"pesEditModalLabel","aria-hidden":"true"},K={class:"modal-dialog modal-xl"},j={class:"modal-content border-0"},G=(0,a._)("div",{class:"modal-header bg-dark text-white"},[(0,a._)("h5",{id:"pesEditModalLabel",class:"modal-title"},[(0,a._)("span",null,"編輯紀錄")]),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Q={class:"modal-body"},R={class:"row"},X={class:"col-sm"},tt={class:"row mb-3"},et={class:"form-group col-md-4"},ot=(0,a._)("label",{for:"diagnosis_no"},"病歷號碼：",-1),at={class:"form-group col-md-4"},st=(0,a._)("label",{for:"patient_id"},"病患編號：",-1),it={class:"form-group col-md-4"},lt=(0,a._)("label",{for:"patient_name"},"姓名：",-1),nt={class:"form-textarea mb-4"},dt=(0,a._)("div",{class:"form-label"},[(0,a._)("label",{for:"problem"},"Problem：")],-1),rt={class:"form-textarea mb-4"},ct=(0,a._)("div",{class:"form-label"},[(0,a._)("label",{for:"etiology"},"Etiology：")],-1),mt={class:"form-textarea mb-4"},pt=(0,a._)("div",{class:"form-label"},[(0,a._)("label",{for:"symptoms"},"Symptoms：")],-1),ut={class:"modal-footer"},_t=(0,a._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消",-1);function bt(t,e,o,s,i,l){return(0,a.wg)(),(0,a.iD)("div",F,[(0,a._)("div",K,[(0,a._)("div",j,[G,(0,a._)("div",Q,[(0,a._)("div",R,[(0,a._)("div",X,[(0,a._)("div",tt,[(0,a._)("div",et,[ot,(0,a.wy)((0,a._)("input",{id:"diagnosis_no",type:"number","onUpdate:modelValue":e[0]||(e[0]=t=>o.infoDetail.diagnosis_no=t),disabled:""},null,512),[[y.nr,o.infoDetail.diagnosis_no]])]),(0,a._)("div",at,[st,(0,a.wy)((0,a._)("input",{id:"patient_id",type:"number","onUpdate:modelValue":e[1]||(e[1]=t=>o.infoDetail.patient_id=t),disabled:""},null,512),[[y.nr,o.infoDetail.patient_id]])]),(0,a._)("div",it,[lt,(0,a.wy)((0,a._)("input",{id:"patient_name",type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>o.infoDetail.name=t),disabled:""},null,512),[[y.nr,o.infoDetail.name]])])]),(0,a._)("div",nt,[dt,(0,a.wy)((0,a._)("textarea",{id:"problem",type:"text",name:"textarea",class:"form-control",rows:"10",cols:"30","onUpdate:modelValue":e[3]||(e[3]=t=>o.infoDetail.problem=t),required:""},null,512),[[y.nr,o.infoDetail.problem]])]),(0,a._)("div",rt,[ct,(0,a.wy)((0,a._)("textarea",{id:"etiology",type:"text",name:"textarea",class:"form-control",rows:"10",cols:"30","onUpdate:modelValue":e[4]||(e[4]=t=>o.infoDetail.etiology=t),required:""},null,512),[[y.nr,o.infoDetail.etiology]])]),(0,a._)("div",mt,[pt,(0,a.wy)((0,a._)("textarea",{id:"etiology",type:"text",name:"textarea",class:"form-control",rows:"10",cols:"30","onUpdate:modelValue":e[5]||(e[5]=t=>o.infoDetail.symptoms=t),required:""},null,512),[[y.nr,o.infoDetail.symptoms]])])])])]),(0,a._)("div",ut,[_t,(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:e[6]||(e[6]=(...t)=>l.confirmEdit&&l.confirmEdit(...t))},"確認")])])])],512)}var ft={data(){return{fixApi:"https://140.123.173.4"}},methods:{confirmEdit(){this.$store.dispatch("startLoading");const t=`${this.fixApi}/nutritionist/nutritionalAssessmentDiagnosis/${this.nutritionist_id}/${this.infoDetail.diagnosis_no}`;this.$http.put(t,this.infoDetail).then((t=>{this.$emit("editPes"),console.log(t.data),setTimeout((()=>{this.$store.dispatch("stopLoading")}),350),(0,W.qp)(t.data.msg)})).catch((t=>{console.log(t),(0,W.Jt)(t.response.data.msg)}))}},computed:{...(0,D.Se)(["getUserID"]),nutritionist_id(){return this.getUserID}},props:{infoDetail:{default:{}}},emits:["editPes"]};const gt=(0,B.Z)(ft,[["render",bt]]);var ht=gt;const Dt={id:"pesDelModal",ref:"pesDelModal",class:"modal fade",tabindex:"-1","aria-labelledby":"pesDelModalLabel","aria-hidden":"true"},yt={class:"modal-dialog"},vt={class:"modal-content border-0"},Mt=(0,a._)("div",{class:"modal-header bg-danger text-white"},[(0,a._)("h5",{id:"pesDelModalLabel",class:"modal-title"},[(0,a._)("span",null,"刪除紀錄")]),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),wt={class:"modal-body"},xt={class:"text-danger"},Et={class:"modal-footer"},St=(0,a._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消",-1);function Pt(t,e,o,i,l,n){return(0,a.wg)(),(0,a.iD)("div",Dt,[(0,a._)("div",yt,[(0,a._)("div",vt,[Mt,(0,a._)("div",wt,[(0,a.Uk)(" 是否刪除 "),(0,a._)("strong",xt,"病歷編號："+(0,s.zw)(o.infoDetail.diagnosis_no),1),(0,a.Uk)(" 紀錄(刪除後將無法恢復)。 ")]),(0,a._)("div",Et,[St,(0,a._)("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=(...t)=>n.confirmDel&&n.confirmDel(...t))},"確認刪除")])])])],512)}var $t={data(){return{fixApi:"https://140.123.173.4"}},methods:{confirmDel(){this.$store.dispatch("startLoading");const t=`${this.fixApi}/nutritionist/nutritionalAssessmentDiagnosis/${this.nutritionist_id}/${this.infoDetail.diagnosis_no}`;this.$http.delete(t).then((t=>{this.$emit("deletePes"),console.log(t.data),setTimeout((()=>{this.$store.dispatch("stopLoading")}),350),(0,W.qp)(t.data.msg)})).catch((t=>{console.log(t),(0,W.Jt)(t.response.data.msg)}))}},computed:{...(0,D.Se)(["getUserID"]),nutritionist_id(){return this.getUserID}},props:{infoDetail:{default:{}}},emits:["deletePes"]};const Ut=(0,B.Z)($t,[["render",Pt]]);var kt=Ut,It={data(){return{fixApi:"https://140.123.173.4",PES_arr:[],PES_InfoDetails:{},pesModal:{},pesEditModal:{},pesDelModal:{}}},methods:{getAssessmentDiagnosis(){const t=`${this.fixApi}/nutritionist/nutritionalAssessmentDiagnosis/${this.nutritionist_id}`;this.$http.get(t).then((t=>{this.PES_arr=t.data})).catch((t=>{console.log(t)}))},formatDate(t){const e=new Date(t),o=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0");let i=e.getHours();const l=e.getMinutes().toString().padStart(2,"0"),n=e.getSeconds().toString().padStart(2,"0"),d=e.getHours()>=12?"PM":"AM";return i>12&&(i-=12),i=i.toString().padStart(2,"0"),`${o}/${a}/${s}, ${i}:${l}:${n} ${d}`},openModal(t,e){""===t?(this.PES_InfoDetails={},this.pesModal.show()):"editModal"===t?(this.PES_InfoDetails=JSON.parse(JSON.stringify(e)),this.pesEditModal.show()):"delModal"===t?(this.PES_InfoDetails=JSON.parse(JSON.stringify(e)),this.pesDelModal.show()):console.log("openModal Error！！")},closeModal(t){""===t?this.pesModal.hide():"editModal"===t?this.pesEditModal.hide():"delModal"===t?this.pesDelModal.hide():console.log("closeModal Error！！"),this.getAssessmentDiagnosis()}},computed:{...(0,D.Se)(["getUserID"]),...(0,D.Se)(["isLoading"]),nutritionist_id(){return this.getUserID}},components:{PesModal:Y,PesEditModal:ht,PesDelModal:kt,Loading:h()},created(){this.getAssessmentDiagnosis()},mounted(){this.pesModal=new f.u_(document.getElementById("pesModal")),this.pesEditModal=new f.u_(document.getElementById("pesEditModal")),this.pesDelModal=new f.u_(document.getElementById("pesDelModal"))}};const At=(0,B.Z)(It,[["render",b]]);var Lt=At}}]);
//# sourceMappingURL=481.e88d1175.js.map