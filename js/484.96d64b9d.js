"use strict";(self["webpackChunkvue3_pwa"]=self["webpackChunkvue3_pwa"]||[]).push([[484],{484:function(t,n,o){o.r(n),o.d(n,{default:function(){return f}});var e=o(3396),i=o(9242);const s={class:"wrapper"},r={class:"container_login"},a={class:"loginBlock"},l=(0,e._)("h1",null,"營養師登入",-1),c={class:"loginInputBlock"},u={for:"accountInput"},d={for:"passwordInput"};function p(t,n,o,p,h,g){return(0,e.wg)(),(0,e.iD)("div",s,[(0,e._)("div",r,[(0,e._)("div",a,[l,(0,e._)("form",c,[(0,e._)("label",u,[(0,e.wy)((0,e._)("input",{type:"text",id:"accountInput","onUpdate:modelValue":n[0]||(n[0]=t=>h.nutritionist.account=t),placeholder:"Email Address",requried:""},null,512),[[i.nr,h.nutritionist.account]])]),(0,e._)("label",d,[(0,e.wy)((0,e._)("input",{type:"password",id:"passwordInput","onUpdate:modelValue":n[1]||(n[1]=t=>h.nutritionist.password=t),placeholder:"Password",requried:"",autocomplete:"off"},null,512),[[i.nr,h.nutritionist.password]])]),(0,e._)("button",{type:"button",id:"signinBtn",class:"signinBtn",onClick:n[2]||(n[2]=(...t)=>g.login&&g.login(...t))},"登入")])])])])}o(7658);var h=o(8456),g={data(){return{nutritionist:{account:"",password:""}}},methods:{login(){const t="https://140.123.173.4",n="/nutritionist/login";this.$http.post(`${t}${n}`,this.nutritionist).then((t=>{if(console.log(t.data),t.data.success){const{token:n,expired:o,id:e,name:i}=t.data;return this.$store.commit("SET_USERID",e),this.$store.dispatch("login",i),document.cookie=`hasToken=${n}; expires=${new Date(o)};`,(0,h.oA)()}return(0,h.BL)()})).then((()=>{this.$router.push("/frontEnd/homepage")})).catch((t=>{console.log(t),(0,h.BL)()}))},installPrompt(){let t;function n(){const n=document.getElementById("signinBtn");n.addEventListener("click",(()=>{t&&(t.prompt(),t.userChoice.then((n=>{"accepted"===n.outcome?console.log("使用者已安裝 PWA"):console.log("使用者拒絕安裝 PWA"),t=null})))}))}window.addEventListener("beforeinstallprompt",(o=>{o.preventDefault(),t=o,n()}))}},created(){this.installPrompt()}},m=o(89);const w=(0,m.Z)(g,[["render",p]]);var f=w}}]);
//# sourceMappingURL=484.96d64b9d.js.map