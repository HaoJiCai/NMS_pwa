"use strict";(self["webpackChunkvue3_pwa"]=self["webpackChunkvue3_pwa"]||[]).push([[324],{9324:function(t,e,n){n.r(e),n.d(e,{default:function(){return H}});var o=n(3396),a=n(9242),l=n(7139);const s={id:"app"},i={for:"search"},d={class:"input-group mb-3"},c=(0,o._)("i",{class:"bi bi-search"},null,-1),h=[c],r={class:"table-responsive"},p={class:"table table-striped table-bordered"},u=(0,o._)("thead",{class:"thead-dark"},[(0,o._)("tr",null,[(0,o._)("th",{scope:"col"},"姓名"),(0,o._)("th",{scope:"col"},"性別"),(0,o._)("th",{scope:"col"},"身分證字號"),(0,o._)("th",{scope:"col"},"電子信箱"),(0,o._)("th",{scope:"col"},"手機"),(0,o._)("th",{scope:"col"})])],-1),_=["onClick"],f=(0,o._)("i",{class:"bi bi-eye-fill"},null,-1),m=[f];function w(t,e,n,c,f,w){const b=(0,o.up)("PatientInfoDetailsModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",s,[(0,o._)("label",i,[(0,o._)("div",d,[(0,o.wy)((0,o._)("input",{type:"text",id:"search",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>f.searchKeyWords=t),placeholder:"輸入關鍵字"},null,512),[[a.nr,f.searchKeyWords]]),(0,o._)("button",{class:"btn btn-outline-success searchBtn",onClick:e[1]||(e[1]=(...t)=>w.searchKeyword&&w.searchKeyword(...t))},h)])]),(0,o._)("div",r,[(0,o._)("table",p,[u,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(f.patients,(t=>((0,o.wg)(),(0,o.iD)("tbody",{key:t.patient_id},[(0,o._)("tr",null,[(0,o._)("td",null,(0,l.zw)(t.name),1),(0,o._)("td",null,(0,l.zw)(w.genderText[t.gender]),1),(0,o._)("td",null,(0,l.zw)(t.ID_Number),1),(0,o._)("td",null,(0,l.zw)(t.email),1),(0,o._)("td",null,(0,l.zw)(t.phone),1),(0,o._)("td",null,[(0,o._)("button",{class:"btn btn-outline-secondary",onClick:e=>w.showDetails(t.patient_id)},m,8,_)])])])))),128))])])]),(0,o.Wm)(b,{"patientinfo-detail":f.healthConditions},null,8,["patientinfo-detail"])],64)}var b=n(2166),g=n(8456);const D={id:"patientInfoDetailsModal",ref:"patientInfoDetailsModal",class:"modal",tabindex:"-1",role:"dialog"},y={class:"modal-dialog",role:"document"},C={class:"modal-content"},v={class:"modal-header"},I={class:"modal-title"},z={class:"modal-body"},$={class:"selectedPatient"},k=(0,o._)("label",{for:"condNo",class:"searchDateLabel"},"查詢日期：",-1),K=(0,o._)("option",{value:"",selected:"",disabled:""},"請選擇日期",-1),N=["value"],x={class:"modal-footer"};function A(t,e,n,s,i,d){return(0,o.wg)(),(0,o.iD)("div",D,[(0,o._)("div",y,[(0,o._)("div",C,[(0,o._)("div",v,[(0,o._)("h5",I,(0,l.zw)(n.patientinfoDetail.modalTitle),1),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e[0]||(e[0]=(...t)=>d.close_btn&&d.close_btn(...t))})]),(0,o._)("div",z,[(0,o._)("div",$,[k,(0,o.wy)((0,o._)("select",{id:"condNo",class:"searchDateSelect","onUpdate:modelValue":e[1]||(e[1]=t=>i.selectedCondNo=t)},[K,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(d.patientInfoArray,(t=>((0,o.wg)(),(0,o.iD)("option",{value:t.cond_no,key:t.cond_no},(0,l.zw)(d.formatDate(t.date)),9,N)))),128))],512),[[a.bM,i.selectedCondNo]])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.patientInfos,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"patientInfo",key:t.cond_no},[(0,o._)("p",null,"飲食醫囑："+(0,l.zw)(t.doctorOrder),1),(0,o._)("p",null,"活動狀態："+(0,l.zw)(t.activeStatus),1),(0,o._)("p",null,"運動情況："+(0,l.zw)(t.sportsStatus),1),(0,o._)("p",null,"症狀："+(0,l.zw)(t.symptom),1),(0,o._)("p",null,"疾病："+(0,l.zw)(t.disease),1),(0,o._)("p",null,"營養知識："+(0,l.zw)(t.knowledge),1),(0,o._)("p",null,"遵從度："+(0,l.zw)(t.compliance),1),(0,o._)("p",null,"身高："+(0,l.zw)(t.height),1),(0,o._)("p",null,"體重："+(0,l.zw)(t.weight),1),(0,o._)("p",null,"BMI："+(0,l.zw)(t.bmi),1),(0,o._)("p",null,"體重變化："+(0,l.zw)(t.weight_change),1),(0,o._)("p",null,"總攝（灌）食量/天："+(0,l.zw)(t.caloriesEaten),1),(0,o._)("p",null,"總需求量/天："+(0,l.zw)(t.caloriesDemand),1)])))),128))]),(0,o._)("div",x,[(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[2]||(e[2]=(...t)=>d.close_btn&&d.close_btn(...t))},"關閉")])])])],512)}var M={data(){return{fixApi:"https://140.123.173.4",selectedCondNo:"",patientInfos:{}}},methods:{getPatientInfos(){this.patientInfos={};let t="";if(this.patientInfoArray.forEach((e=>{t=e.patient_id})),""!==this.selectedCondNo){const e=`${this.fixApi}/patient/healthConditions/${t}/${this.selectedCondNo}`;this.$http.get(e).then((t=>{this.patientInfos=t.data})).catch((t=>{console.log(t)}))}},close_btn(){this.selectedCondNo="",this.getPatientInfos()},formatDate(t){const e=new Date(t),n=e.getFullYear(),o=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${n}-${o}-${a}`}},watch:{selectedCondNo:{handler(){this.getPatientInfos()},deep:!0,immediate:!1}},computed:{patientInfoArray(){const t=Array.from(this.patientinfoDetail);return t}},props:{patientinfoDetail:{default:[]}},created(){this.selectedCondNo="",this.getPatientInfos()}},P=n(89);const S=(0,P.Z)(M,[["render",A]]);var W=S,T={data(){return{fixApi:"https://140.123.173.4",searchKeyWords:"",patients:[],patientInfoDetails_modal:{},healthConditions:{modalTitle:"",modalContent:""}}},computed:{genderText(){return{0:"女",1:"男"}}},methods:{searchKeyword(){const t=`${this.fixApi}/patient`,e=this.searchKeyWords.trim();this.$http.get(t,{params:{keyword:e}}).then((t=>{console.log(t.data),this.patients=t.data[0].result,""===e?(0,g.tv)():(0,g.e$)(t.data[0].total),this.searchKeyWords=""})).catch((t=>{console.log(t)}))},search(){const t=`${this.fixApi}/patient`;this.$http.get(t).then((t=>{this.patients=t.data[0].result,this.searchKeyWords=""})).catch((t=>{console.log(t)}))},showDetails(t){const e=`${this.fixApi}/patient/healthConditions/${t}`;this.$http.get(e).then((t=>{this.healthConditions=t.data,console.log(t.data),this.healthConditions.modalTitle=`${this.healthConditions[0].name} 詳細資料`,this.patientInfoDetails_modal.show()})).catch((t=>{console.log(t),this.healthConditions.modalTitle="錯誤",this.healthConditions.modalContent="獲取用戶資訊失敗。請稍後再試。",this.patientInfoDetails_modal.show()}))}},components:{PatientInfoDetailsModal:W},created(){this.search()},mounted(){const t=new b.u_(document.getElementById("patientInfoDetailsModal"));this.patientInfoDetails_modal=t}};const Y=(0,P.Z)(T,[["render",w]]);var H=Y}}]);
//# sourceMappingURL=324.d0af23ed.js.map