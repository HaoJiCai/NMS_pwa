"use strict";(self["webpackChunkvue3_pwa"]=self["webpackChunkvue3_pwa"]||[]).push([[868],{9868:function(t,e,o){o.r(e),o.d(e,{default:function(){return z}});var i=o(3396),s=o(9242),a=o(7139);const n={id:"app"},l={for:"search"},h={class:"input-group mb-3"},d={class:"table-responsive"},c={class:"table table-striped table-bordered"},r=(0,i._)("thead",{class:"thead-dark"},[(0,i._)("tr",null,[(0,i._)("th",{scope:"col"},"姓名"),(0,i._)("th",{scope:"col"},"性別"),(0,i._)("th",{scope:"col"},"身分證字號"),(0,i._)("th",{scope:"col"},"電子信箱"),(0,i._)("th",{scope:"col"},"手機"),(0,i._)("th",{scope:"col"})])],-1),p=["onClick"];function u(t,e,o,u,m,b){const _=(0,i.up)("PatientInfoDetailsModal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",n,[(0,i._)("label",l,[(0,i._)("div",h,[(0,i.wy)((0,i._)("input",{type:"text",id:"search",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>m.searchKeyWords=t),placeholder:"輸入關鍵字"},null,512),[[s.nr,m.searchKeyWords]]),(0,i._)("button",{class:"btn btn-outline-success searchBtn",onClick:e[1]||(e[1]=(...t)=>b.searchKeyword&&b.searchKeyword(...t))},"查詢")])]),(0,i._)("div",d,[(0,i._)("table",c,[r,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(m.patients,(t=>((0,i.wg)(),(0,i.iD)("tbody",{key:t.patient_id},[(0,i._)("tr",null,[(0,i._)("td",null,(0,a.zw)(t.name),1),(0,i._)("td",null,(0,a.zw)(b.genderText[t.gender]),1),(0,i._)("td",null,(0,a.zw)(t.ID_Number),1),(0,i._)("td",null,(0,a.zw)(t.email),1),(0,i._)("td",null,(0,a.zw)(t.phone),1),(0,i._)("td",null,[(0,i._)("button",{class:"btn btn-outline-secondary",onClick:e=>b.showDetails(t.patient_id)},"詳細",8,p)])])])))),128))])])]),(0,i.Wm)(_,{"patientinfo-detail":m.healthConditions},null,8,["patientinfo-detail"])],64)}var m=o(2166),b=o(8456);const _={id:"patientInfoDetailsModal",ref:"patientInfoDetailsModal",class:"modal",tabindex:"-1",role:"dialog"},C={class:"modal-dialog",role:"document"},f={class:"modal-content"},g={class:"modal-header"},$={class:"modal-title"},w=(0,i._)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close","data-bs-dismiss":"modal"},[(0,i._)("span",{"aria-hidden":"true"},"×")],-1),y=["innerHTML"],D=(0,i._)("div",{class:"modal-footer"},[(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉")],-1);function v(t,e,o,s,n,l){return(0,i.wg)(),(0,i.iD)("div",_,[(0,i._)("div",C,[(0,i._)("div",f,[(0,i._)("div",g,[(0,i._)("h5",$,(0,a.zw)(o.patientinfoDetail.modalTitle),1),w]),(0,i._)("div",{class:"modal-body",innerHTML:o.patientinfoDetail.modalContent},null,8,y),D])])],512)}var k={data(){return{api:"https://140.123.173.4/patient/healthConditions"}},methods:{},props:{patientinfoDetail:{default:{}}}},I=o(89);const K=(0,I.Z)(k,[["render",v]]);var x=K,T={data(){return{fixApi:"https://140.123.173.4",searchKeyWords:"",patients:[],patientInfoDetails_modal:{},healthConditions:{modalTitle:"",modalContent:""}}},computed:{genderText(){return{0:"女",1:"男"}}},methods:{checkedLoginStatus(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hasToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=t;const e=`${this.fixApi}/nutritionist/loginCheck`;this.$http.get(e).then((t=>{t.data.success&&(0,b.hf)()})).catch((()=>{(0,b.GB)()}))},searchKeyword(){const t=`${this.fixApi}/patient/`,e=this.searchKeyWords.trim();this.$http.get(t,{params:{keyword:e}}).then((t=>{console.log(t.data),this.patients=t.data[0].result,""===e?(0,b.tv)():(0,b.e$)(t.data[0].total),this.searchKeyWords=""})).catch((t=>{console.log(t)}))},search(){const t=`${this.fixApi}/patient/`;this.$http.get(t).then((t=>{console.log(t.data),this.patients=t.data[0].result,this.searchKeyWords=""})).catch((t=>{console.log(t)}))},showDetails(t){const e=`${this.fixApi}/patient/healthConditions/${t}`;this.$http.get(e).then((t=>{this.healthConditions=t.data,this.healthConditions.modalTitle=`${this.healthConditions.name} 詳細資料`,this.healthConditions.modalContent=`飲食醫囑：${this.healthConditions.doctorOrder}<br>活動狀態：${this.healthConditions.activeStatus}<br>運動情況：${this.healthConditions.sportsStatus}<br>症狀：${this.healthConditions.symptom}<br>疾病：${this.healthConditions.disease}<br>營養知識：${this.healthConditions.knowledge}<br>遵從度：${this.healthConditions.compliance}<br>身高：${this.healthConditions.height}<br>體重：${this.healthConditions.weight}<br>BMI：${this.healthConditions.bmi}<br>體重變化：${this.healthConditions.weight_change}<br>總攝（灌）食量/天：${this.healthConditions.caloriesEaten} 大卡<br>總需求量/天：${this.healthConditions.caloriesDemand} 大卡<br>`,console.log(this.healthConditions.modalContent),this.patientInfoDetails_modal.show()})).catch((t=>{console.log(t),this.healthConditions.modalTitle="錯誤",this.healthConditions.modalContent="獲取用戶資訊失敗。請稍後再試。",this.patientInfoDetails_modal.show()}))}},components:{PatientInfoDetailsModal:x},created(){this.search()},mounted(){this.checkedLoginStatus();const t=new m.u_(document.getElementById("patientInfoDetailsModal"));this.patientInfoDetails_modal=t}};const M=(0,I.Z)(T,[["render",u]]);var z=M}}]);
//# sourceMappingURL=868.cbcdfe0d.js.map