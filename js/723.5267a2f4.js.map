{"version":3,"file":"js/723.5267a2f4.js","mappings":"6LACOA,MAAM,a,GACJA,MAAM,c,GAITC,EAAAA,EAAAA,GAAqB,SAAlB,kBAAc,G,0CALrBC,EAAAA,EAAAA,IAOM,MAPNC,EAOM,EANJF,EAAAA,EAAAA,GAKM,MALNG,EAKM,EAJJH,EAAAA,EAAAA,GAEK,oBAFD,UACEA,EAAAA,EAAAA,GAA2B,aAAAI,EAAAA,EAAAA,IAAlBC,EAAAC,UAAQ,YAAU,WAEjCC,K,+BASN,GACEC,IAAAA,GACE,MAAO,CACLC,OAAQ,wBAEZ,EACAC,QAAS,CAEPC,kBAAAA,GAEE,MAAMC,EAAQC,SAASC,OAAOC,QAAQ,kDAAmD,MACzFC,KAAKC,MAAMC,SAASC,QAAQC,OAAOC,cAAgBT,EAEnD,MAAMU,EAAO,GAAEN,KAAKP,iCAEpBO,KAAKC,MAAMM,IAAID,GAAKE,MAAMC,IAEpBA,EAAOjB,KAAKkB,SACdC,QAAQC,IAAI,SACd,IACCC,OAAM,MACPC,EAAAA,EAAAA,MACAd,KAAKe,QAAQC,KAAK,aAAa,GAEnC,EAEAC,6BAAAA,GACE,GAAI,iBAAkBC,OAAQ,CAE5B,MAAMC,EAA6BC,aAAaC,QAAQ,8BAEnDF,GACHG,aAAaC,oBAAoBf,MAAMgB,IACrC,GAAmB,YAAfA,EAA0B,CAC5B,MAAMC,EAAe,IAAIH,aAAa,UAAW,CAC/CI,KAAM,gBAERf,QAAQC,IAAIa,GAGZL,aAAaO,QAAQ,8BAA8B,EACrD,IAGN,CACF,GAEFC,SAAU,KACLC,EAAAA,EAAAA,IAAW,CAAC,YAAa,gBAC5BvC,QAAAA,GAEE,OAAOU,KAAK8B,WACd,GAEFC,OAAAA,GACE/B,KAAKL,qBACLK,KAAKiB,+BACP,G,QCjEF,MAAMe,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://vue3_pwa/./src/views/client/HomePage.vue","webpack://vue3_pwa/./src/views/client/HomePage.vue?431b"],"sourcesContent":["<template>\r\n  <div class=\"home-page\">\r\n    <div class=\"page-block\">\r\n      <h2>\r\n        您好～ <span>{{ username }}</span> 營養師\r\n      </h2>\r\n      <p>歡迎使用 NMS營養資訊系統</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex';\r\nimport { checkErrorMsg } from '../toastMessage';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      fixApi: 'https://140.123.173.4',\r\n    };\r\n  },\r\n  methods: {\r\n    // 檢查登入驗證\r\n    checkedLoginStatus() {\r\n      // eslint-disable-next-line\r\n      const token = document.cookie.replace(/(?:(?:^|.*;\\s*)hasToken\\s*\\=\\s*([^;]*).*$)|^.*$/, '$1'); // 取得名為 hasToken 的 cookie\r\n      this.$http.defaults.headers.common.Authorization = token; // 把 Token 加入到 Headers Authorization 裡\r\n      // console.log(token);\r\n      const api = `${this.fixApi}/nutritionist/loginCheck`;\r\n      // 串接 /user/check API\r\n      this.$http.get(api).then((status) => {\r\n        // console.log(status);\r\n        if (status.data.success) {\r\n          console.log('身分驗證成功');\r\n        }\r\n      }).catch(() => {\r\n        checkErrorMsg();\r\n        this.$router.push('/userLogin');\r\n      });\r\n    },\r\n    // 允許通知權限\r\n    requestNotificationPermission() {\r\n      if ('Notification' in window) {\r\n        // 檢查是否已經提示過權限\r\n        const notificationPermissionFlag = localStorage.getItem('notificationPermissionFlag');\r\n\r\n        if (!notificationPermissionFlag) {\r\n          Notification.requestPermission().then((permission) => {\r\n            if (permission === 'granted') {\r\n              const notification = new Notification('通知權限已啟用', {\r\n                body: '您現在可以接收通知了！',\r\n              });\r\n              console.log(notification);\r\n\r\n              // 將標誌設置為已提示過權限\r\n              localStorage.setItem('notificationPermissionFlag', true);\r\n            }\r\n          });\r\n        }\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapGetters(['getUserID', 'getUsername']), // 映射 Vuex getter\r\n    username() {\r\n      // 使用映射的 getter 從 Vuex 的 state 中獲取使用者姓名\r\n      return this.getUsername;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.checkedLoginStatus();\r\n    this.requestNotificationPermission();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  .home-page {\r\n    width: 100%;\r\n    height: 70vh;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    .page-block {\r\n      h2 {\r\n        font-size: 48px;\r\n        font-weight: 600;\r\n        color: rgb(88, 85, 85);\r\n        padding: 12px 0;\r\n        margin-bottom: 36px;\r\n        @media screen and (max-width: 1024px) {\r\n          font-size: 42px;\r\n          padding: 12px 4px;\r\n        }\r\n        @media screen and (max-width: 768px) {\r\n          font-size: 30px;\r\n          padding: 12px 10px;\r\n        }\r\n        span {\r\n          font-size: 56px;\r\n          font-weight: bold;\r\n          color: rgb(41, 87, 118);\r\n          @media screen and (max-width: 1024px) {\r\n            font-size: 48px;\r\n          }\r\n          @media screen and (max-width: 768px) {\r\n            font-size: 36px;\r\n          }\r\n        }\r\n      }\r\n      p {\r\n        font-size: 60px;\r\n        font-weight: 500;\r\n        color: rgb(104, 79, 79);\r\n        padding: 12px 0;\r\n        @media screen and (max-width: 1024px) {\r\n          font-size: 44px;\r\n          padding: 12px 4px;\r\n        }\r\n        @media screen and (max-width: 768px) {\r\n          font-size: 28px;\r\n          padding: 12px 10px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./HomePage.vue?vue&type=template&id=27f56af2\"\nimport script from \"./HomePage.vue?vue&type=script&lang=js\"\nexport * from \"./HomePage.vue?vue&type=script&lang=js\"\n\nimport \"./HomePage.vue?vue&type=style&index=0&id=27f56af2&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_toDisplayString","$options","username","_hoisted_3","data","fixApi","methods","checkedLoginStatus","token","document","cookie","replace","this","$http","defaults","headers","common","Authorization","api","get","then","status","success","console","log","catch","checkErrorMsg","$router","push","requestNotificationPermission","window","notificationPermissionFlag","localStorage","getItem","Notification","requestPermission","permission","notification","body","setItem","computed","mapGetters","getUsername","mounted","__exports__","render"],"sourceRoot":""}